import{e as Ge,u as f,o as he,n as be,r as x,a as we,w as M,g as Me,b as Ae,t as Le,c as je,d as ye,s as Te,f as F,h as Be,i as C,j as m,k as p,l as s,m as A,p as ke,v as Se,_ as W,q as h,F as V,x as ee,y as E,z as ae,A as le,B as Q,C as xe,D as Oe,E as ie,G as P,H as R,T as Ne}from"./index-CirATdYS.js";function ce(e){return Me()?(Ae(e),!0):!1}function De(e){let t=!1,n;const o=Ge(!0);return(...r)=>(t||(n=o.run(()=>e(...r)),t=!0),n)}function te(e){return typeof e=="function"?e():f(e)}const Ce=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ve=Object.prototype.toString,Pe=e=>Ve.call(e)==="[object Object]",Ie=()=>{};function Ue(e,t){function n(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return n}const $e=e=>e();function We(e=$e){const t=x(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...a)=>{t.value&&e(...a)};return{isActive:we(t),pause:n,resume:o,eventFilter:r}}function qe(e){return e||ye()}function He(...e){if(e.length!==1)return Le(...e);const t=e[0];return typeof t=="function"?we(je(()=>({get:t,set:Ie}))):x(t)}function Je(e,t,n={}){const{eventFilter:o=$e,...r}=n;return M(e,Ue(o,t),r)}function Qe(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:a,pause:i,resume:d,isActive:u}=We(o);return{stop:Je(e,t,{...r,eventFilter:a}),pause:i,resume:d,isActive:u}}function Fe(e,t=!0,n){const o=qe(n);o?he(e,o):t?e():be(e)}function Z(e){var t;const n=te(e);return(t=n==null?void 0:n.$el)!=null?t:n}const U=Ce?window:void 0,Ze=Ce?window.document:void 0;function K(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=U):[t,n,o,r]=e,!t)return Ie;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],i=()=>{a.forEach(b=>b()),a.length=0},d=(b,c,v,w)=>(b.addEventListener(c,v,w),()=>b.removeEventListener(c,v,w)),u=M(()=>[Z(t),te(r)],([b,c])=>{if(i(),!b)return;const v=Pe(c)?{...c}:c;a.push(...n.flatMap(w=>o.map(y=>d(b,w,y,v))))},{immediate:!0,flush:"post"}),g=()=>{u(),i()};return ce(g),g}function Ke(){const e=x(!1);return ye()&&he(()=>{e.value=!0}),e}function Ee(e){const t=Ke();return F(()=>(t.value,!!e()))}function Xe(e,t={}){const{window:n=U}=t,o=Ee(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const a=x(!1),i=g=>{a.value=g.matches},d=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",i):r.removeListener(i))},u=Be(()=>{o.value&&(d(),r=n.matchMedia(te(e)),"addEventListener"in r?r.addEventListener("change",i):r.addListener(i),a.value=r.matches)});return ce(()=>{u(),d(),r=void 0}),a}const H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J="__vueuse_ssr_handlers__",Ye=et();function et(){return J in H||(H[J]=H[J]||{}),H[J]}function Re(e,t){return Ye[e]||t}function tt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const nt={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},fe="vueuse-storage";function ze(e,t,n,o={}){var r;const{flush:a="pre",deep:i=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:g=!1,shallow:b,window:c=U,eventFilter:v,onError:w=_=>{console.error(_)},initOnMounted:y}=o,k=(b?Te:x)(typeof t=="function"?t():t);if(!n)try{n=Re("getDefaultStorage",()=>{var _;return(_=U)==null?void 0:_.localStorage})()}catch(_){w(_)}if(!n)return k;const $=te(t),l=tt($),G=(r=o.serializer)!=null?r:nt[l],{pause:j,resume:I}=Qe(k,()=>T(k.value),{flush:a,deep:i,eventFilter:v});return c&&d&&Fe(()=>{K(c,"storage",z),K(c,fe,N),y&&z()}),y||z(),k;function T(_){try{if(_==null)n.removeItem(e);else{const S=G.write(_),B=n.getItem(e);B!==S&&(n.setItem(e,S),c&&c.dispatchEvent(new CustomEvent(fe,{detail:{key:e,oldValue:B,newValue:S,storageArea:n}})))}}catch(S){w(S)}}function q(_){const S=_?_.newValue:n.getItem(e);if(S==null)return u&&$!=null&&n.setItem(e,G.write($)),$;if(!_&&g){const B=G.read(S);return typeof g=="function"?g(B,$):l==="object"&&!Array.isArray(B)?{...$,...B}:B}else return typeof S!="string"?S:G.read(S)}function N(_){z(_.detail)}function z(_){if(!(_&&_.storageArea!==n)){if(_&&_.key==null){k.value=$;return}if(!(_&&_.key!==e)){j();try{(_==null?void 0:_.newValue)!==G.write(k.value)&&(k.value=q(_))}catch(S){w(S)}finally{_?be(I):I()}}}}}function rt(e){return Xe("(prefers-color-scheme: dark)",e)}function ot(e={}){const{selector:t="html",attribute:n="class",initialValue:o="auto",window:r=U,storage:a,storageKey:i="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:u,emitAuto:g,disableTransition:b=!0}=e,c={auto:"",light:"light",dark:"dark",...e.modes||{}},v=rt({window:r}),w=F(()=>v.value?"dark":"light"),y=u||(i==null?He(o):ze(i,o,a,{window:r,listenToStorageChanges:d})),k=F(()=>y.value==="auto"?w.value:y.value),$=Re("updateHTMLAttrs",(I,T,q)=>{const N=typeof I=="string"?r==null?void 0:r.document.querySelector(I):Z(I);if(!N)return;let z;if(b){z=r.document.createElement("style");const _="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";z.appendChild(document.createTextNode(_)),r.document.head.appendChild(z)}if(T==="class"){const _=q.split(/\s/g);Object.values(c).flatMap(S=>(S||"").split(/\s/g)).filter(Boolean).forEach(S=>{_.includes(S)?N.classList.add(S):N.classList.remove(S)})}else N.setAttribute(T,q);b&&(r.getComputedStyle(z).opacity,document.head.removeChild(z))});function l(I){var T;$(t,n,(T=c[I])!=null?T:I)}function G(I){e.onChanged?e.onChanged(I,l):l(I)}M(k,G,{flush:"post",immediate:!0}),Fe(()=>G(k.value));const j=F({get(){return g?y.value:k.value},set(I){y.value=I}});try{return Object.assign(j,{store:y,system:w,state:k})}catch{return j}}const me=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function st(e,t={}){const{document:n=Ze,autoExit:o=!1}=t,r=F(()=>{var l;return(l=Z(e))!=null?l:n==null?void 0:n.querySelector("html")}),a=x(!1),i=F(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(l=>n&&l in n||r.value&&l in r.value)),d=F(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(l=>n&&l in n||r.value&&l in r.value)),u=F(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(l=>n&&l in n||r.value&&l in r.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(l=>n&&l in n),b=Ee(()=>r.value&&n&&i.value!==void 0&&d.value!==void 0&&u.value!==void 0),c=()=>g?(n==null?void 0:n[g])===r.value:!1,v=()=>{if(u.value){if(n&&n[u.value]!=null)return n[u.value];{const l=r.value;if((l==null?void 0:l[u.value])!=null)return!!l[u.value]}}return!1};async function w(){if(!(!b.value||!a.value)){if(d.value)if((n==null?void 0:n[d.value])!=null)await n[d.value]();else{const l=r.value;(l==null?void 0:l[d.value])!=null&&await l[d.value]()}a.value=!1}}async function y(){if(!b.value||a.value)return;v()&&await w();const l=r.value;i.value&&(l==null?void 0:l[i.value])!=null&&(await l[i.value](),a.value=!0)}async function k(){await(a.value?w():y())}const $=()=>{const l=v();(!l||l&&c())&&(a.value=l)};return K(n,me,$,!1),K(()=>Z(r),me,$,!1),o&&ce(w),{isSupported:b,isFullscreen:a,enter:y,exit:w,toggle:k}}const L=De(()=>ze("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0})),at=C({__name:"ChangeGameStatus",setup(e){const t=L(),n=()=>{t.value.gameState="pause"};return(o,r)=>(m(),p("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[s("div",{class:A({"i-material-symbols:play-circle-rounded":f(t).gameState==="pause","i-material-symbols:pause-circle":f(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),lt=C({__name:"GameInfoToggle",setup(e){const t=L(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(o,r)=>ke((m(),p("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[s("div",{class:A({"i-material-symbols:right-panel-close-rounded":f(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!f(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[Se,f(t).gameState==="start"]])}}),it=s("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),ct=[it],ut=C({__name:"ChangeBackImage",setup(e){const t=L(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(o,r)=>(m(),p("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},ct))}}),dt=C({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=st();return(o,r)=>(m(),p("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...a)=>f(n)&&f(n)(...a))},[s("div",{class:A({"i-gridicons:fullscreen-exit":f(t),"i-gridicons:fullscreen":!f(t)}),"text-2xl":""},null,2)]))}}),ft=s("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),mt=[ft],pt=C({__name:"ColorSchemeToggle",setup(e){const t=ot(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(o,r)=>(m(),p("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},mt))}}),_t={},vt={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},gt=s("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),ht=[gt];function bt(e,t){return m(),p("a",vt,ht)}const wt=W(_t,[["render",bt]]),yt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},kt=s("div",{title:"Game"},"E-Card",-1),St=s("div",{"flex-auto":""},null,-1),xt={__name:"GameNav",setup(e){return(t,n)=>(m(),p("nav",yt,[kt,St,h(at),h(wt),h(lt),h(pt),h(ut),h(dt)]))}},ne=e=>(ae("data-v-c4066736"),e=e(),le(),e),Ct=ne(()=>s("tr",null,[s("td",null,"局数"),s("td",null,"角色"),s("td",null,"结果"),s("td",null,"玩家"),s("td",null,"电脑")],-1)),It=ne(()=>s("td",null,"总比分",-1)),$t=ne(()=>s("td",null,null,-1)),Ft=ne(()=>s("td",null,null,-1)),Et=C({__name:"GameInformation",props:{gameInfoItems:{default:()=>[]}},setup(e){const t=L(),o=e.gameInfoItems,r=F(()=>o.reduce((i,d)=>i+d.playerScore,0)),a=F(()=>o.reduce((i,d)=>i+d.computerScore,0));return M(()=>r.value,i=>{i===11&&(t.value.gameState="win")},{immediate:!0}),M(()=>a.value,i=>{i===11&&(t.value.gameState="lose")},{immediate:!0}),(i,d)=>(m(),p("table",null,[Ct,(m(!0),p(V,null,ee(f(o),u=>(m(),p("tr",{class:A(u.playerScore?"bg-green":"bg-red")},[s("td",null,E(u.round),1),s("td",null,E(u.role),1),s("td",null,E(u.result),1),s("td",null,E(u.playerScore),1),s("td",null,E(u.computerScore),1)],2))),256)),s("tr",null,[It,$t,Ft,s("td",null,E(f(r)),1),s("td",null,E(f(a)),1)])]))}}),Rt=W(Et,[["__scopeId","data-v-c4066736"]]),zt=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,Gt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,Mt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,At=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,Lt=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,jt=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,Tt=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,Bt=""+new URL("PingFangMedium-SeRS6mht.ttf",import.meta.url).href,Ot=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,O=L(),Nt=e=>e=="emperor"?"国王":"奴隶",pe=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),X=(e,t=!0)=>{const n=Array(5).fill(0).map((r,a)=>pe("citizen",a+1,e)),o=re(5);return n[o]=pe(e,o+1,e),n.map(r=>r.isBack=!t),n},oe=e=>e=="emperor"?"slave":"emperor",_e=(e,t)=>{O.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:X(e,!0),computerCardItems:X(oe(e),!1),bgImage:1,isShowGameInfo:!0}},Dt=()=>{const e=oe(O.value.playerRole),t=O.value.rounds+1;O.value.playerRole=e,O.value.rounds=t,O.value.playerCardItems=X(e,!0),O.value.computerCardItems=X(oe(e),!1)},Y=e=>new URL(Object.assign({"../assets/bg-1.jpg":zt,"../assets/bg-2.jpg":Gt,"../assets/bg-3.jpg":Mt,"../assets/bg-4.jpg":At,"../assets/card-bg.jpg":Lt,"../assets/citizen.jpg":jt,"../assets/emperor.jpg":Tt,"../assets/fonts/PingFangMedium.ttf":Bt,"../assets/slave.jpg":Ot})[`../assets/${e}`],import.meta.url).href,re=e=>(Math.floor(Math.random()*e)+1)%e,se=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let o in e)e.hasOwnProperty(o)&&(n[o]=se(e[o],t));return n},Vt=C({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(o,r)=>(m(),p("div",{class:A({"card-animation":o.isAnimation,"card-back":o.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=a=>n("card-click",o.cardInfo))},[s("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:Q({backgroundImage:`url(${f(Y)(o.cardInfo.img)})`})},null,4),s("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:Q({backgroundImage:`url(${f(Y)("card-bg.jpg")})`})},null,4)],2))}}),D=W(Vt,[["__scopeId","data-v-cfbea0d8"]]),Pt={grid:"~ cols-5 gap-5"},Ut=C({__name:"ComputedCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const o=e,r=n,a=x();return M(()=>o.cardItems,d=>{a.value=d},{immediate:!0}),t({cardCheckClick:d=>{a.value=a.value.filter(u=>u.sort!==d.sort),r("card-check",d)}}),(d,u)=>(m(),p("div",Pt,[(m(!0),p(V,null,ee(d.cardItems,(g,b)=>(m(),p("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([g.isClick?"top--20px":"top-0",g.group,g.role+b])},[h(D,{"card-info":g,"is-back":""},null,8,["card-info"])],2))),256))]))}}),Wt={key:0,"text-center":""},qt=["onClick"],Ht=C({__name:"PlayerCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const o=e,r=n,a=x();M(()=>o.cardItems,u=>{a.value=u},{immediate:!0});const i=u=>{a.value.map(g=>g.isClick=!1),u.isClick=!0},d=u=>{u.isBack=!0,setTimeout(()=>{r("card-check",u)},1e3)};return t({cardCheckClick:d}),(u,g)=>{const b=xe("draggable");return m(),Oe(b,{list:u.cardItems,tag:"div",group:{name:u.role,pull:!0,put:!1,revertClone:!0},"component-data":{grid:"~ cols-5 gap-5"},"item-key":"sort",sort:!0},{item:ie(({element:c,index:v})=>[s("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([c.isClick?"top--20px":"top-0",c.group,c.role+v])},[h(D,{cardInfo:c,"is-back":c.isBack,onCardClick:i},null,8,["cardInfo","is-back"]),c.isClick?(m(),p("div",Wt,[s("button",{onClick:w=>d(c)},"check",8,qt)])):P("",!0)],2)]),_:1},8,["list","group"])}}}),ue=e=>(ae("data-v-8724dea7"),e=e(),le(),e),Jt={"box-border":"","w-full":"","h-full":"","flex-center":""},Qt={"p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd":""},Zt=ue(()=>s("h3",null,"游戏说明",-1)),Kt={flex:"~ col gap-2"},Xt={"font-size-7":""},Yt=ue(()=>s("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),en=ue(()=>s("span",null,"Back",-1)),tn=[Yt,en],nn=C({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t,o=["游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌","皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）","奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）","游戏开始时随机分配角色，之后每一局角色轮换，共进行21局","玩家选择一张牌后，点击check出牌，进行比较","皇帝赢市民，市民赢奴隶，奴隶赢皇帝","市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方","皇帝或奴隶被杀，游戏宣告结束，被杀方告负","赢则积1分，数则积0分，先赢到11分则游戏结束"];return(r,a)=>(m(),p("div",Jt,[s("div",Qt,[Zt,s("div",Kt,[(m(),p(V,null,ee(o,i=>s("p",Xt,E(i),1)),64))]),s("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:a[0]||(a[0]=i=>n("close"))},tn)])]))}}),rn=W(nn,[["__scopeId","data-v-8724dea7"]]),de=e=>(ae("data-v-10c03648"),e=e(),le(),e),on={"box-border":"","w-full":"","h-full":"","flex-center":""},sn={"w-600px":"","p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd":""},an=de(()=>s("h3",null,"制作人员",-1)),ln={flex:"~ col gap-2"},cn={"font-size-7":""},un=de(()=>s("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),dn=de(()=>s("span",null,"Back",-1)),fn=[un,dn],mn=C({__name:"ProducerList",emits:["close"],setup(e,{emit:t}){const n=t,o=["SmallTeddy"];return(r,a)=>(m(),p("div",on,[s("div",sn,[an,s("div",ln,[(m(),p(V,null,ee(o,i=>s("p",cn,E(i),1)),64))]),s("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:a[0]||(a[0]=i=>n("close"))},fn)])]))}}),pn=W(mn,[["__scopeId","data-v-10c03648"]]),_n={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},vn={key:0,flex:"~ col items-center gap-10"},gn={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},hn={"text-green":""},bn={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},wn={"text-red":""},yn={key:1,"flex-col":"","flex-center":"","gap-5":""},kn={"flex-center":"","gap-10":""},Sn={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},xn={key:2,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},ve=21,Cn=C({__name:"GameMenu",setup(e,{expose:t}){const n=L(),o=x(!1),r=x(!0),a=x({playerRole:re(2)==0?"emperor":"slave",rounds:1}),i=F(()=>Nt(a.value.playerRole));_e(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),a.value=n.value;const d=()=>{r.value=!0,a.value.rounds<=ve&&a.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},u=()=>{n.value.gameState==="win"||n.value.gameState==="lose"||(o.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,a.value.rounds>ve&&(o.value=!1)},2e3))},g=()=>{o.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",_e(a.value.playerRole,a.value.rounds),a.value=n.value},b=F(()=>{let l;switch(n.value.gameState){case"pause":l="游戏继续";break;case"win":l="您赢了！";break;case"lose":l="您输了！";break;default:l="游戏开始"}return l}),c=x(!1),v=x(!1),w=()=>{r.value=!1,c.value=!0},y=()=>{r.value=!0,c.value=!1},k=()=>{r.value=!1,v.value=!0},$=()=>{r.value=!0,v.value=!1};return M(()=>n.value.gameState,l=>{l==="start"&&u(),(l==="pause"||l==="win"||l==="lose")&&(r.value=!0,o.value=!1)},{immediate:!0}),t({reshow:d}),(l,G)=>{var j;return m(),p(V,null,[f(r)?(m(),p("div",_n,[f(o)?(m(),p("div",vn,[s("div",gn,[R(" 第 "),s("span",hn,E((j=f(a))==null?void 0:j.rounds),1),R(" 局 ")]),s("div",bn,[R(" 角色 ： "),s("span",wn,E(f(i)),1)])])):(m(),p("div",yn,[s("button",{onClick:u},E(f(b)),1),f(n).gameState!=="init"?(m(),p("button",{key:0,onClick:g},"重新开始")):P("",!0),s("button",{onClick:w},"游戏说明"),s("button",{onClick:k},"制作人员"),s("div",kn,[h(D,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),h(D,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),h(D,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):P("",!0),f(c)?(m(),p("div",Sn,[h(rn,{onClose:y})])):P("",!0),f(v)?(m(),p("div",xn,[h(pn,{onClose:$})])):P("",!0)],64)}}}),In={key:0},$n={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},Fn=s("br",null,null,-1),En=s("br",null,null,-1),Rn=s("br",null,null,-1),ge=C({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(m(),p("div",In,[h(D,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(m(),p("div",$n,[R(" 检"),Fn,R("查"),En,R("区"),Rn,R("域 ")]))}}),zn={key:0,"flex-center":"",relative:"","card-size":""},Gn=["alt","src"],Mn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},An=s("br",null,null,-1),Ln=s("br",null,null,-1),jn=s("br",null,null,-1),Tn=C({__name:"DropCard",props:{cardItems:{default:()=>[]}},setup(e){return(t,n)=>{const o=xe("draggable");return t.cardItems.length>0?(m(),p("div",zn,[h(o,{list:t.cardItems,group:"drop","item-key":"sort"},{item:ie(({element:r,index:a})=>[s("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:Q(`--rotation-random: ${f(re)(5*a)}deg`),alt:r.role,src:f(Y)(r.img)},null,12,Gn)]),_:1},8,["list"])])):(m(),p("div",Mn,[R(" 弃"),An,R("牌"),Ln,R("区"),jn,R("域 ")]))}}}),Bn={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},On={"w-full":"","bg-gray:50":"","flex-center":""},Nn={"bg-gray:50":"","flex-center":""},Dn={"w-full":"","bg-gray:50":"","flex-center":""},Vn={"w-full":"","bg-gray:50":"","flex-center":""},Pn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},Un={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},Wn={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},qn=C({__name:"GameMain",setup(e){const t=L(),n=x(null),o=F(()=>t.value.playerRole),r=x(),a=x(),i=x([]),d=x([]),u=c=>{r.value&&i.value.push(r.value,a.value);const v=se(c);r.value=v,t.value.playerCardItems=t.value.playerCardItems.filter(k=>k.sort!==v.sort);const w=re(t.value.computerCardItems.length),y=se(t.value.computerCardItems[w]);a.value=y,t.value.computerCardItems=t.value.computerCardItems.filter(k=>k.sort!==y.sort),setTimeout(()=>{b(v,y)},1e3)},g=(c,v)=>{const y={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[c.role][v.role];return{round:t.value.rounds,role:o.value,result:y,playerScore:y==="win"?1:0,computerScore:y==="win"?0:1}},b=(c,v)=>{setTimeout(()=>{a.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(a.value=null,r.value=null,c.role===v.role)i.value.push(c,v);else{const w=g(c,v);d.value.push(w),i.value=[],Dt(),n.value.reshow()}},2e3)};return M(()=>t.value.gameState,c=>{(c==="init"||c==="win"||c==="lose")&&(i.value=[],d.value=[])}),(c,v)=>(m(),p(V,null,[h(Cn,{ref_key:"showGameMenuRef",ref:n},null,512),h(Ne,null,{default:ie(()=>[s("div",{"h-full":"","w-screen":"",grid:"~",class:A([f(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[s("div",Bn,[s("div",On,[h(Ut,{role:"slave",cardItems:f(t).computerCardItems},null,8,["cardItems"])]),s("div",Nn,[h(ge,{"card-info":[f(a)]},null,8,["card-info"])]),s("div",Dn,[h(ge,{"card-info":[f(r)]},null,8,["card-info"])]),s("div",Vn,[h(Ht,{role:"emperor",cardItems:f(t).playerCardItems,onCardCheck:u},null,8,["cardItems"])])]),ke(s("div",Pn,[s("div",Un,[h(Rt,{"game-info-items":f(d)},null,8,["game-info-items"])]),s("div",Wn,[h(Tn,{cardItems:f(i)},null,8,["cardItems"])])],512),[[Se,f(t).isShowGameInfo]])],2)]),_:1})],64))}}),Hn=C({__name:"GameContent",setup(e){const t=L();return(n,o)=>(m(),p("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:Q({backgroundImage:`url(${f(Y)(`bg-${f(t).bgImage}.jpg`)})`})},[h(qn)],4))}}),Jn={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},Zn=C({__name:"Home",setup(e){return(t,n)=>(m(),p("main",Jn,[h(xt),h(Hn)]))}});export{Zn as default};

import{e as Re,u as c,o as me,n as pe,r as I,a as _e,w as O,g as ze,b as Le,t as Me,c as Ae,d as ve,s as je,f as E,h as Te,i as S,j as i,k as u,l,m as A,p as ge,v as he,_ as ee,q as h,F as N,x as P,y as F,z as be,A as we,B as Q,C as ye,D as G,E as U,G as Be,T as Oe}from"./index-q2AZX_vh.js";function le(e){return ze()?(Le(e),!0):!1}function Ne(e){let t=!1,n;const s=Re(!0);return(...r)=>(t||(n=s.run(()=>e(...r)),t=!0),n)}function te(e){return typeof e=="function"?e():c(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const De=Object.prototype.toString,Ve=e=>De.call(e)==="[object Object]",xe=()=>{};function qe(e,t){function n(...s){return new Promise((r,o)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(o)})}return n}const ke=e=>e();function Pe(e=ke){const t=I(!0);function n(){t.value=!1}function s(){t.value=!0}const r=(...o)=>{t.value&&e(...o)};return{isActive:_e(t),pause:n,resume:s,eventFilter:r}}function We(e){return e||ve()}function Ue(...e){if(e.length!==1)return Me(...e);const t=e[0];return typeof t=="function"?_e(Ae(()=>({get:t,set:xe}))):I(t)}function He(e,t,n={}){const{eventFilter:s=ke,...r}=n;return O(e,qe(s,t),r)}function Je(e,t,n={}){const{eventFilter:s,...r}=n,{eventFilter:o,pause:f,resume:d,isActive:v}=Pe(s);return{stop:He(e,t,{...r,eventFilter:o}),pause:f,resume:d,isActive:v}}function Ce(e,t=!0,n){const s=We(n);s?me(e,s):t?e():pe(e)}function Z(e){var t;const n=te(e);return(t=n==null?void 0:n.$el)!=null?t:n}const q=Se?window:void 0,Qe=Se?window.document:void 0;function K(...e){let t,n,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,r]=e,t=q):[t,n,s,r]=e,!t)return xe;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],f=()=>{o.forEach(p=>p()),o.length=0},d=(p,g,b,w)=>(p.addEventListener(g,b,w),()=>p.removeEventListener(g,b,w)),v=O(()=>[Z(t),te(r)],([p,g])=>{if(f(),!p)return;const b=Ve(g)?{...g}:g;o.push(...n.flatMap(w=>s.map(k=>d(p,w,k,b))))},{immediate:!0,flush:"post"}),_=()=>{v(),f()};return le(_),_}function Ze(){const e=I(!1);return ve()&&me(()=>{e.value=!0}),e}function $e(e){const t=Ze();return E(()=>(t.value,!!e()))}function Ke(e,t={}){const{window:n=q}=t,s=$e(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const o=I(!1),f=_=>{o.value=_.matches},d=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",f):r.removeListener(f))},v=Te(()=>{s.value&&(d(),r=n.matchMedia(te(e)),"addEventListener"in r?r.addEventListener("change",f):r.addListener(f),o.value=r.matches)});return le(()=>{v(),d(),r=void 0}),o}const H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J="__vueuse_ssr_handlers__",Ye=Xe();function Xe(){return J in H||(H[J]=H[J]||{}),H[J]}function Ie(e,t){return Ye[e]||t}function et(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const tt={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ae="vueuse-storage";function Ee(e,t,n,s={}){var r;const{flush:o="pre",deep:f=!0,listenToStorageChanges:d=!0,writeDefaults:v=!0,mergeDefaults:_=!1,shallow:p,window:g=q,eventFilter:b,onError:w=m=>{console.error(m)},initOnMounted:k}=s,x=(p?je:I)(typeof t=="function"?t():t);if(!n)try{n=Ie("getDefaultStorage",()=>{var m;return(m=q)==null?void 0:m.localStorage})()}catch(m){w(m)}if(!n)return x;const $=te(t),a=et($),L=(r=s.serializer)!=null?r:tt[a],{pause:j,resume:C}=Je(x,()=>T(x.value),{flush:o,deep:f,eventFilter:b});return g&&d&&Ce(()=>{K(g,"storage",z),K(g,ae,D),k&&z()}),k||z(),x;function T(m){try{if(m==null)n.removeItem(e);else{const y=L.write(m),B=n.getItem(e);B!==y&&(n.setItem(e,y),g&&g.dispatchEvent(new CustomEvent(ae,{detail:{key:e,oldValue:B,newValue:y,storageArea:n}})))}}catch(y){w(y)}}function W(m){const y=m?m.newValue:n.getItem(e);if(y==null)return v&&$!=null&&n.setItem(e,L.write($)),$;if(!m&&_){const B=L.read(y);return typeof _=="function"?_(B,$):a==="object"&&!Array.isArray(B)?{...$,...B}:B}else return typeof y!="string"?y:L.read(y)}function D(m){z(m.detail)}function z(m){if(!(m&&m.storageArea!==n)){if(m&&m.key==null){x.value=$;return}if(!(m&&m.key!==e)){j();try{(m==null?void 0:m.newValue)!==L.write(x.value)&&(x.value=W(m))}catch(y){w(y)}finally{m?pe(C):C()}}}}}function nt(e){return Ke("(prefers-color-scheme: dark)",e)}function rt(e={}){const{selector:t="html",attribute:n="class",initialValue:s="auto",window:r=q,storage:o,storageKey:f="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:v,emitAuto:_,disableTransition:p=!0}=e,g={auto:"",light:"light",dark:"dark",...e.modes||{}},b=nt({window:r}),w=E(()=>b.value?"dark":"light"),k=v||(f==null?Ue(s):Ee(f,s,o,{window:r,listenToStorageChanges:d})),x=E(()=>k.value==="auto"?w.value:k.value),$=Ie("updateHTMLAttrs",(C,T,W)=>{const D=typeof C=="string"?r==null?void 0:r.document.querySelector(C):Z(C);if(!D)return;let z;if(p){z=r.document.createElement("style");const m="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";z.appendChild(document.createTextNode(m)),r.document.head.appendChild(z)}if(T==="class"){const m=W.split(/\s/g);Object.values(g).flatMap(y=>(y||"").split(/\s/g)).filter(Boolean).forEach(y=>{m.includes(y)?D.classList.add(y):D.classList.remove(y)})}else D.setAttribute(T,W);p&&(r.getComputedStyle(z).opacity,document.head.removeChild(z))});function a(C){var T;$(t,n,(T=g[C])!=null?T:C)}function L(C){e.onChanged?e.onChanged(C,a):a(C)}O(x,L,{flush:"post",immediate:!0}),Ce(()=>L(x.value));const j=E({get(){return _?k.value:x.value},set(C){k.value=C}});try{return Object.assign(j,{store:k,system:w,state:x})}catch{return j}}const ie=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function st(e,t={}){const{document:n=Qe,autoExit:s=!1}=t,r=E(()=>{var a;return(a=Z(e))!=null?a:n==null?void 0:n.querySelector("html")}),o=I(!1),f=E(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(a=>n&&a in n||r.value&&a in r.value)),d=E(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(a=>n&&a in n||r.value&&a in r.value)),v=E(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(a=>n&&a in n||r.value&&a in r.value)),_=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(a=>n&&a in n),p=$e(()=>r.value&&n&&f.value!==void 0&&d.value!==void 0&&v.value!==void 0),g=()=>_?(n==null?void 0:n[_])===r.value:!1,b=()=>{if(v.value){if(n&&n[v.value]!=null)return n[v.value];{const a=r.value;if((a==null?void 0:a[v.value])!=null)return!!a[v.value]}}return!1};async function w(){if(!(!p.value||!o.value)){if(d.value)if((n==null?void 0:n[d.value])!=null)await n[d.value]();else{const a=r.value;(a==null?void 0:a[d.value])!=null&&await a[d.value]()}o.value=!1}}async function k(){if(!p.value||o.value)return;b()&&await w();const a=r.value;f.value&&(a==null?void 0:a[f.value])!=null&&(await a[f.value](),o.value=!0)}async function x(){await(o.value?w():k())}const $=()=>{const a=b();(!a||a&&g())&&(o.value=a)};return K(n,ie,$,!1),K(()=>Z(r),ie,$,!1),s&&le(w),{isSupported:p,isFullscreen:o,enter:k,exit:w,toggle:x}}const R=Ne(()=>Ee("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]})),ot=S({__name:"ChangeGameStatus",setup(e){const t=R(),n=()=>{t.value.gameState="pause"};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[l("div",{class:A({"i-material-symbols:play-circle-rounded":c(t).gameState==="pause","i-material-symbols:pause-circle":c(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),lt=S({__name:"GameInfoToggle",setup(e){const t=R(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(s,r)=>ge((i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[l("div",{class:A({"i-material-symbols:right-panel-close-rounded":c(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!c(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[he,c(t).gameState==="start"]])}}),at=l("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),it=[at],ut=S({__name:"ChangeBackImage",setup(e){const t=R(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},it))}}),ct=S({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=st();return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...o)=>c(n)&&c(n)(...o))},[l("div",{class:A({"i-gridicons:fullscreen-exit":c(t),"i-gridicons:fullscreen":!c(t)}),"text-2xl":""},null,2)]))}}),dt=l("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),ft=[dt],mt=S({__name:"ColorSchemeToggle",setup(e){const t=rt(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},ft))}}),pt={},_t={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},vt=l("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),gt=[vt];function ht(e,t){return i(),u("a",_t,gt)}const bt=ee(pt,[["render",ht]]),wt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},yt=l("div",{title:"Game"},"E-Card",-1),St=l("div",{"flex-auto":""},null,-1),xt={__name:"GameNav",setup(e){return(t,n)=>(i(),u("nav",wt,[yt,St,h(ot),h(bt),h(lt),h(mt),h(ut),h(ct)]))}},ne=e=>(be("data-v-2480fc94"),e=e(),we(),e),kt=ne(()=>l("tr",null,[l("td",null,"局数"),l("td",null,"角色"),l("td",null,"结果"),l("td",null,"玩家"),l("td",null,"电脑")],-1)),Ct=ne(()=>l("td",null,"总比分",-1)),$t=ne(()=>l("td",null,null,-1)),It=ne(()=>l("td",null,null,-1)),Et=S({__name:"GameInformation",setup(e){const t=R(),n=o=>t.value.gameLogItems.reduce((f,d)=>f+d[o],0),s=E(()=>n("playerScore")),r=E(()=>n("computerScore"));return O(()=>s.value,o=>{o===11&&(t.value.gameState="win")},{immediate:!0}),O(()=>r.value,o=>{o===11&&(t.value.gameState="lose")},{immediate:!0}),(o,f)=>(i(),u("table",null,[kt,(i(!0),u(N,null,P(c(t).gameLogItems,d=>(i(),u("tr",{key:`${d.role}-${d.sort}`,class:A(d.playerScore?"bg-green:50":"bg-red:50")},[l("td",null,F(d.round),1),l("td",null,F(d.role),1),l("td",null,F(d.result),1),l("td",null,F(d.playerScore),1),l("td",null,F(d.computerScore),1)],2))),128)),l("tr",null,[Ct,$t,It,l("td",null,F(c(s)),1),l("td",null,F(c(r)),1)])]))}}),Ft=ee(Et,[["__scopeId","data-v-2480fc94"]]),Gt=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,Rt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,zt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,Lt=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,Mt=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,At=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,jt=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,Tt=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,M=R(),Bt=e=>e=="emperor"?"国王":"奴隶",ue=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),Y=(e,t=!0)=>{const n=Array(5).fill(0).map((r,o)=>ue("citizen",o+1,e)),s=re(5);return n[s]=ue(e,s+1,e),n.map(r=>r.isBack=!t),n},se=e=>e=="emperor"?"slave":"emperor",ce=(e,t)=>{M.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:Y(e,!0),computerCardItems:Y(se(e),!1),bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]}},Ot=()=>{const e=se(M.value.playerRole),t=M.value.rounds+1;M.value.playerRole=e,M.value.rounds=t,M.value.playerCardItems=Y(e,!0),M.value.computerCardItems=Y(se(e),!1),M.value.dropedCardItems=[]},X=e=>new URL(Object.assign({"../assets/bg-1.jpg":Gt,"../assets/bg-2.jpg":Rt,"../assets/bg-3.jpg":zt,"../assets/bg-4.jpg":Lt,"../assets/card-bg.jpg":Mt,"../assets/citizen.jpg":At,"../assets/emperor.jpg":jt,"../assets/slave.jpg":Tt})[`../assets/${e}`],import.meta.url).href,re=e=>(Math.floor(Math.random()*e)+1)%e,oe=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let s in e)e.hasOwnProperty(s)&&(n[s]=oe(e[s],t));return n},Nt=S({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(s,r)=>(i(),u("div",{class:A({"card-animation":s.isAnimation,"card-back":s.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=o=>n("card-click",s.cardInfo))},[l("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:Q({backgroundImage:`url(${c(X)(s.cardInfo.img)})`})},null,4),l("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:Q({backgroundImage:`url(${c(X)("card-bg.jpg")})`})},null,4)],2))}}),V=ee(Nt,[["__scopeId","data-v-cfbea0d8"]]),Dt={grid:"~ cols-5 gap-5"},Vt=S({__name:"ComputedCard",setup(e){const t=R();return(n,s)=>(i(),u("div",Dt,[(i(!0),u(N,null,P(c(t).computerCardItems,r=>(i(),u("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",key:r.sort},[h(V,{"card-info":r,"is-back":""},null,8,["card-info"])]))),128))]))}}),qt={grid:"~ cols-5 gap-5"},Pt=S({__name:"PlayerCard",emits:["card-check"],setup(e,{expose:t,emit:n}){const s=R(),r=n,o=f=>{f.isBack=!0,setTimeout(()=>{r("card-check",f)},1e3)};return t({cardCheckClick:o}),(f,d)=>(i(),u("div",qt,[(i(!0),u(N,null,P(c(s).playerCardItems,v=>(i(),u("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"","hover:top--20px":"",key:v.sort,class:A([v.isClick?"top--20px":"top-0"])},[h(V,{"card-info":v,"is-back":v.isBack,onCardClick:o},null,8,["card-info","is-back"])],2))),128))]))}}),Fe=e=>(be("data-v-ad855f05"),e=e(),we(),e),Wt={"box-border":"","w-full":"","h-full":"","flex-center":""},Ut={"p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd-12px":"",style:{"min-width":"600px"}},Ht={flex:"~ col gap-2"},Jt=Fe(()=>l("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),Qt=Fe(()=>l("span",null,"Back",-1)),Zt=[Jt,Qt],Kt=S({__name:"MessageInfo",props:{title:{default:()=>""},infoList:{default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=t;return(s,r)=>(i(),u("div",Wt,[l("div",Ut,[l("h3",null,F(s.title),1),l("div",Ht,[(i(!0),u(N,null,P(s.infoList,o=>(i(),u("p",{"font-size-7":"",key:o,class:A({"text-center":s.title==="制作人员"})},F(o),3))),128))]),l("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:r[0]||(r[0]=o=>n("close"))},Zt)])]))}}),Ge=ee(Kt,[["__scopeId","data-v-ad855f05"]]),Yt=S({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t,s=["游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌","皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）","奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）","游戏开始时随机分配角色，之后每一局角色轮换，共进行21局","玩家选择一张牌后，点击出牌，进行比较","皇帝赢市民，市民赢奴隶，奴隶赢皇帝","市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方","皇帝或奴隶被杀，游戏宣告结束，被杀方告负","赢则积1分，数则积0分，先赢到11分则游戏结束"];return(r,o)=>(i(),ye(Ge,{title:"游戏说明","info-list":s,onClose:o[0]||(o[0]=f=>n("close"))}))}}),Xt=S({__name:"ProducerList",emits:["close"],setup(e,{emit:t}){const n=t,s=["SmallTeddy","wh131462","remember-study","cangbaoderen","Yang-mingLei","Medalc","qingjiuge"];return(r,o)=>(i(),ye(Ge,{title:"制作人员","info-list":s,onClose:o[0]||(o[0]=f=>n("close"))}))}}),en={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},tn={key:0,flex:"~ col items-center gap-10"},nn={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},rn={"text-green":""},sn={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},on={"text-red":""},ln={key:1,"flex-col":"","flex-center":"","gap-5":""},an={"flex-center":"","gap-10":""},un={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},cn={key:2,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},de=21,dn=S({__name:"GameMenu",setup(e,{expose:t}){const n=R(),s=I(!1),r=I(!0),o=I({playerRole:re(2)==0?"emperor":"slave",rounds:1}),f=E(()=>Bt(o.value.playerRole));ce(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),o.value=n.value;const d=()=>{r.value=!0,o.value.rounds<=de&&o.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},v=()=>{n.value.gameState==="win"||n.value.gameState==="lose"||(s.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,o.value.rounds>de&&(s.value=!1)},2e3))},_=()=>{s.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",ce(o.value.playerRole,o.value.rounds),o.value=n.value},p=E(()=>{let a;switch(n.value.gameState){case"pause":a="游戏继续";break;case"win":a="您赢了！";break;case"lose":a="您输了！";break;default:a="游戏开始"}return a}),g=I(!1),b=I(!1),w=()=>{r.value=!1,g.value=!0},k=()=>{r.value=!0,g.value=!1},x=()=>{r.value=!1,b.value=!0},$=()=>{r.value=!0,b.value=!1};return O(()=>n.value.gameState,a=>{a==="start"&&v(),["pause","win","lose"].includes(a)&&(r.value=!0,s.value=!1)},{immediate:!0}),t({reshow:d}),(a,L)=>{var j;return i(),u(N,null,[c(r)?(i(),u("div",en,[c(s)?(i(),u("div",tn,[l("div",nn,[G(" 第 "),l("span",rn,F((j=c(o))==null?void 0:j.rounds),1),G(" 局 ")]),l("div",sn,[G(" 角色 ： "),l("span",on,F(c(f)),1)])])):(i(),u("div",ln,[l("button",{onClick:v},F(c(p)),1),c(n).gameState!=="init"?(i(),u("button",{key:0,onClick:_},"重新开始")):U("",!0),l("button",{onClick:w},"游戏说明"),l("button",{onClick:x},"制作人员"),l("div",an,[h(V,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),h(V,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),h(V,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):U("",!0),c(g)?(i(),u("div",un,[h(Yt,{onClose:k})])):U("",!0),c(b)?(i(),u("div",cn,[h(Xt,{onClose:$})])):U("",!0)],64)}}}),fn={key:0},mn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},pn=l("br",null,null,-1),_n=l("br",null,null,-1),vn=l("br",null,null,-1),fe=S({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(i(),u("div",fn,[h(V,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(i(),u("div",mn,[G(" 检"),pn,G("查"),_n,G("区"),vn,G("域 ")]))}}),gn={key:0,"flex-center":"",relative:"","card-size":""},hn=["alt","src"],bn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},wn=l("br",null,null,-1),yn=l("br",null,null,-1),Sn=l("br",null,null,-1),xn=S({__name:"DropCard",setup(e){const t=R();return(n,s)=>c(t).dropedCardItems.length>0?(i(),u("div",gn,[(i(!0),u(N,null,P(c(t).dropedCardItems,(r,o)=>(i(),u("div",{key:r.sort},[l("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:Q(`--rotation-random: ${c(re)(5*o)}deg`),alt:r.role,src:c(X)(r.img)},null,12,hn)]))),128))])):(i(),u("div",bn,[G(" 弃"),wn,G("牌"),yn,G("区"),Sn,G("域 ")]))}}),kn={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},Cn={"w-full":"","bg-gray:50":"","flex-center":""},$n={"bg-gray:50":"","flex-center":""},In={"w-full":"","bg-gray:50":"","flex-center":""},En={"w-full":"","bg-gray:50":"","flex-center":""},Fn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},Gn={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},Rn={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},zn=S({__name:"GameMain",setup(e){const t=R(),n=I(null),s=E(()=>t.value.playerRole),r=I(),o=I(),f=_=>{r.value&&t.value.dropedCardItems.push(r.value,o.value);const p=oe(_);r.value=p,t.value.playerCardItems=t.value.playerCardItems.filter(w=>w.sort!==p.sort);const g=re(t.value.computerCardItems.length),b=oe(t.value.computerCardItems[g]);o.value=b,t.value.computerCardItems=t.value.computerCardItems.filter(w=>w.sort!==b.sort),setTimeout(()=>{v(p,b)},1e3)},d=(_,p)=>{const b={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[_.role][p.role];return{round:t.value.rounds,role:s.value,result:b,playerScore:b==="win"?1:0,computerScore:b==="win"?0:1}},v=(_,p)=>{setTimeout(()=>{o.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(o.value=null,r.value=null,_.role===p.role)t.value.dropedCardItems.push(_,p);else{const g=d(_,p);t.value.gameLogItems.push(g),Ot(),n.value.reshow()}},2e3)};return O(()=>t.value.gameState,_=>{["init","win","lose"].includes(_)&&(t.value.rounds=0,t.value.dropedCardItems=[],t.value.gameLogItems=[])}),(_,p)=>(i(),u(N,null,[h(dn,{ref_key:"showGameMenuRef",ref:n},null,512),h(Oe,null,{default:Be(()=>[l("div",{"h-full":"","w-screen":"",grid:"~",class:A([c(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[l("div",kn,[l("div",Cn,[h(Vt)]),l("div",$n,[h(fe,{"card-info":[c(o)]},null,8,["card-info"])]),l("div",In,[h(fe,{"card-info":[c(r)]},null,8,["card-info"])]),l("div",En,[h(Pt,{onCardCheck:f})])]),ge(l("div",Fn,[l("div",Gn,[h(Ft)]),l("div",Rn,[h(xn)])],512),[[he,c(t).isShowGameInfo]])],2)]),_:1})],64))}}),Ln=S({__name:"GameContent",setup(e){const t=R();return(n,s)=>(i(),u("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:Q({backgroundImage:`url(${c(X)(`bg-${c(t).bgImage}.jpg`)})`})},[h(zn)],4))}}),Mn={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},jn=S({__name:"Home",setup(e){return(t,n)=>(i(),u("main",Mn,[h(xt),h(Ln)]))}});export{jn as default};

import{e as ze,u as c,o as pe,n as _e,r as I,a as ve,w as O,g as Le,b as Me,t as Ae,c as Te,d as ge,s as je,f as E,h as Be,i as S,j as i,k as u,l,m as A,p as he,v as be,_ as te,q as h,F as N,x as W,y as F,z as we,A as ye,B as Z,C as Se,D as G,E as H,G as Oe,T as Ne}from"./index-wBMlslMu.js";function ae(e){return Le()?(Me(e),!0):!1}function De(e){let t=!1,n;const s=ze(!0);return(...r)=>(t||(n=s.run(()=>e(...r)),t=!0),n)}function ne(e){return typeof e=="function"?e():c(e)}const xe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ve=Object.prototype.toString,qe=e=>Ve.call(e)==="[object Object]",ke=()=>{};function Pe(e,t){function n(...s){return new Promise((r,o)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(o)})}return n}const Ce=e=>e();function We(e=Ce){const t=I(!0);function n(){t.value=!1}function s(){t.value=!0}const r=(...o)=>{t.value&&e(...o)};return{isActive:ve(t),pause:n,resume:s,eventFilter:r}}function Ue(e){return e||ge()}function He(...e){if(e.length!==1)return Ae(...e);const t=e[0];return typeof t=="function"?ve(Te(()=>({get:t,set:ke}))):I(t)}function Je(e,t,n={}){const{eventFilter:s=Ce,...r}=n;return O(e,Pe(s,t),r)}function Qe(e,t,n={}){const{eventFilter:s,...r}=n,{eventFilter:o,pause:f,resume:d,isActive:v}=We(s);return{stop:Je(e,t,{...r,eventFilter:o}),pause:f,resume:d,isActive:v}}function $e(e,t=!0,n){const s=Ue(n);s?pe(e,s):t?e():_e(e)}function K(e){var t;const n=ne(e);return(t=n==null?void 0:n.$el)!=null?t:n}const P=xe?window:void 0,Ze=xe?window.document:void 0;function Y(...e){let t,n,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,r]=e,t=P):[t,n,s,r]=e,!t)return ke;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],f=()=>{o.forEach(p=>p()),o.length=0},d=(p,g,b,w)=>(p.addEventListener(g,b,w),()=>p.removeEventListener(g,b,w)),v=O(()=>[K(t),ne(r)],([p,g])=>{if(f(),!p)return;const b=qe(g)?{...g}:g;o.push(...n.flatMap(w=>s.map(k=>d(p,w,k,b))))},{immediate:!0,flush:"post"}),_=()=>{v(),f()};return ae(_),_}function Ke(){const e=I(!1);return ge()&&pe(()=>{e.value=!0}),e}function Ie(e){const t=Ke();return E(()=>(t.value,!!e()))}function Ye(e,t={}){const{window:n=P}=t,s=Ie(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const o=I(!1),f=_=>{o.value=_.matches},d=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",f):r.removeListener(f))},v=Be(()=>{s.value&&(d(),r=n.matchMedia(ne(e)),"addEventListener"in r?r.addEventListener("change",f):r.addListener(f),o.value=r.matches)});return ae(()=>{v(),d(),r=void 0}),o}const J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q="__vueuse_ssr_handlers__",Xe=et();function et(){return Q in J||(J[Q]=J[Q]||{}),J[Q]}function Ee(e,t){return Xe[e]||t}function tt(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const nt={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ie="vueuse-storage";function Fe(e,t,n,s={}){var r;const{flush:o="pre",deep:f=!0,listenToStorageChanges:d=!0,writeDefaults:v=!0,mergeDefaults:_=!1,shallow:p,window:g=P,eventFilter:b,onError:w=m=>{console.error(m)},initOnMounted:k}=s,x=(p?je:I)(typeof t=="function"?t():t);if(!n)try{n=Ee("getDefaultStorage",()=>{var m;return(m=P)==null?void 0:m.localStorage})()}catch(m){w(m)}if(!n)return x;const $=ne(t),a=tt($),L=(r=s.serializer)!=null?r:nt[a],{pause:T,resume:C}=Qe(x,()=>j(x.value),{flush:o,deep:f,eventFilter:b});return g&&d&&$e(()=>{Y(g,"storage",z),Y(g,ie,D),k&&z()}),k||z(),x;function j(m){try{if(m==null)n.removeItem(e);else{const y=L.write(m),B=n.getItem(e);B!==y&&(n.setItem(e,y),g&&g.dispatchEvent(new CustomEvent(ie,{detail:{key:e,oldValue:B,newValue:y,storageArea:n}})))}}catch(y){w(y)}}function U(m){const y=m?m.newValue:n.getItem(e);if(y==null)return v&&$!=null&&n.setItem(e,L.write($)),$;if(!m&&_){const B=L.read(y);return typeof _=="function"?_(B,$):a==="object"&&!Array.isArray(B)?{...$,...B}:B}else return typeof y!="string"?y:L.read(y)}function D(m){z(m.detail)}function z(m){if(!(m&&m.storageArea!==n)){if(m&&m.key==null){x.value=$;return}if(!(m&&m.key!==e)){T();try{(m==null?void 0:m.newValue)!==L.write(x.value)&&(x.value=U(m))}catch(y){w(y)}finally{m?_e(C):C()}}}}}function rt(e){return Ye("(prefers-color-scheme: dark)",e)}function st(e={}){const{selector:t="html",attribute:n="class",initialValue:s="auto",window:r=P,storage:o,storageKey:f="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:v,emitAuto:_,disableTransition:p=!0}=e,g={auto:"",light:"light",dark:"dark",...e.modes||{}},b=rt({window:r}),w=E(()=>b.value?"dark":"light"),k=v||(f==null?He(s):Fe(f,s,o,{window:r,listenToStorageChanges:d})),x=E(()=>k.value==="auto"?w.value:k.value),$=Ee("updateHTMLAttrs",(C,j,U)=>{const D=typeof C=="string"?r==null?void 0:r.document.querySelector(C):K(C);if(!D)return;let z;if(p){z=r.document.createElement("style");const m="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";z.appendChild(document.createTextNode(m)),r.document.head.appendChild(z)}if(j==="class"){const m=U.split(/\s/g);Object.values(g).flatMap(y=>(y||"").split(/\s/g)).filter(Boolean).forEach(y=>{m.includes(y)?D.classList.add(y):D.classList.remove(y)})}else D.setAttribute(j,U);p&&(r.getComputedStyle(z).opacity,document.head.removeChild(z))});function a(C){var j;$(t,n,(j=g[C])!=null?j:C)}function L(C){e.onChanged?e.onChanged(C,a):a(C)}O(x,L,{flush:"post",immediate:!0}),$e(()=>L(x.value));const T=E({get(){return _?k.value:x.value},set(C){k.value=C}});try{return Object.assign(T,{store:k,system:w,state:x})}catch{return T}}const ue=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function ot(e,t={}){const{document:n=Ze,autoExit:s=!1}=t,r=E(()=>{var a;return(a=K(e))!=null?a:n==null?void 0:n.querySelector("html")}),o=I(!1),f=E(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(a=>n&&a in n||r.value&&a in r.value)),d=E(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(a=>n&&a in n||r.value&&a in r.value)),v=E(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(a=>n&&a in n||r.value&&a in r.value)),_=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(a=>n&&a in n),p=Ie(()=>r.value&&n&&f.value!==void 0&&d.value!==void 0&&v.value!==void 0),g=()=>_?(n==null?void 0:n[_])===r.value:!1,b=()=>{if(v.value){if(n&&n[v.value]!=null)return n[v.value];{const a=r.value;if((a==null?void 0:a[v.value])!=null)return!!a[v.value]}}return!1};async function w(){if(!(!p.value||!o.value)){if(d.value)if((n==null?void 0:n[d.value])!=null)await n[d.value]();else{const a=r.value;(a==null?void 0:a[d.value])!=null&&await a[d.value]()}o.value=!1}}async function k(){if(!p.value||o.value)return;b()&&await w();const a=r.value;f.value&&(a==null?void 0:a[f.value])!=null&&(await a[f.value](),o.value=!0)}async function x(){await(o.value?w():k())}const $=()=>{const a=b();(!a||a&&g())&&(o.value=a)};return Y(n,ue,$,!1),Y(()=>K(r),ue,$,!1),s&&ae(w),{isSupported:p,isFullscreen:o,enter:k,exit:w,toggle:x}}const R=De(()=>Fe("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]})),lt=S({__name:"ChangeGameStatus",setup(e){const t=R(),n=()=>{t.value.gameState="pause"};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[l("div",{class:A({"i-material-symbols:play-circle-rounded":c(t).gameState==="pause","i-material-symbols:pause-circle":c(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),at=S({__name:"GameInfoToggle",setup(e){const t=R(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(s,r)=>he((i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[l("div",{class:A({"i-material-symbols:right-panel-close-rounded":c(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!c(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[be,c(t).gameState==="start"]])}}),it=l("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),ut=[it],ct=S({__name:"ChangeBackImage",setup(e){const t=R(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},ut))}}),dt=S({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=ot();return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...o)=>c(n)&&c(n)(...o))},[l("div",{class:A({"i-gridicons:fullscreen-exit":c(t),"i-gridicons:fullscreen":!c(t)}),"text-2xl":""},null,2)]))}}),ft=l("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),mt=[ft],pt=S({__name:"ColorSchemeToggle",setup(e){const t=st(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(s,r)=>(i(),u("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},mt))}}),_t={},vt={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},gt=l("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),ht=[gt];function bt(e,t){return i(),u("a",vt,ht)}const wt=te(_t,[["render",bt]]),yt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},St=l("div",{title:"Game"},"E-Card",-1),xt=l("div",{"flex-auto":""},null,-1),kt={__name:"GameNav",setup(e){return(t,n)=>(i(),u("nav",yt,[St,xt,h(lt),h(wt),h(at),h(pt),h(ct),h(dt)]))}},re=e=>(we("data-v-2480fc94"),e=e(),ye(),e),Ct=re(()=>l("tr",null,[l("td",null,"局数"),l("td",null,"角色"),l("td",null,"结果"),l("td",null,"玩家"),l("td",null,"电脑")],-1)),$t=re(()=>l("td",null,"总比分",-1)),It=re(()=>l("td",null,null,-1)),Et=re(()=>l("td",null,null,-1)),Ft=S({__name:"GameInformation",setup(e){const t=R(),n=o=>t.value.gameLogItems.reduce((f,d)=>f+d[o],0),s=E(()=>n("playerScore")),r=E(()=>n("computerScore"));return O(()=>s.value,o=>{o===11&&(t.value.gameState="win")},{immediate:!0}),O(()=>r.value,o=>{o===11&&(t.value.gameState="lose")},{immediate:!0}),(o,f)=>(i(),u("table",null,[Ct,(i(!0),u(N,null,W(c(t).gameLogItems,d=>(i(),u("tr",{key:`${d.role}-${d.sort}`,class:A(d.playerScore?"bg-green:50":"bg-red:50")},[l("td",null,F(d.round),1),l("td",null,F(d.role),1),l("td",null,F(d.result),1),l("td",null,F(d.playerScore),1),l("td",null,F(d.computerScore),1)],2))),128)),l("tr",null,[$t,It,Et,l("td",null,F(c(s)),1),l("td",null,F(c(r)),1)])]))}}),Gt=te(Ft,[["__scopeId","data-v-2480fc94"]]),Rt=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,zt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,Lt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,Mt=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,At=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,Tt=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,jt=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,Bt=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,M=R(),Ot=e=>e=="emperor"?"国王":"奴隶",ce=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),X=(e,t=!0)=>{const n=Array(5).fill(0).map((r,o)=>ce("citizen",o+1,e)),s=se(5);return n[s]=ce(e,s+1,e),n.map(r=>r.isBack=!t),n},oe=e=>e=="emperor"?"slave":"emperor",de=(e,t)=>{M.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:X(e,!0),computerCardItems:X(oe(e),!1),bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]}},Nt=()=>{const e=oe(M.value.playerRole),t=M.value.rounds+1;M.value.playerRole=e,M.value.rounds=t,M.value.playerCardItems=X(e,!0),M.value.computerCardItems=X(oe(e),!1),M.value.dropedCardItems=[]},ee=e=>new URL(Object.assign({"../assets/bg-1.jpg":Rt,"../assets/bg-2.jpg":zt,"../assets/bg-3.jpg":Lt,"../assets/bg-4.jpg":Mt,"../assets/card-bg.jpg":At,"../assets/citizen.jpg":Tt,"../assets/emperor.jpg":jt,"../assets/slave.jpg":Bt})[`../assets/${e}`],import.meta.url).href,se=e=>(Math.floor(Math.random()*e)+1)%e,le=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let s in e)e.hasOwnProperty(s)&&(n[s]=le(e[s],t));return n};let q;const Dt=(e,t=300)=>{q||(e(),q=setTimeout(()=>{q&&clearTimeout(q),q=null},t))},Vt=S({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(s,r)=>(i(),u("div",{class:A({"card-animation":s.isAnimation,"card-back":s.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=o=>n("card-click",s.cardInfo))},[l("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:Z({backgroundImage:`url(${c(ee)(s.cardInfo.img)})`})},null,4),l("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:Z({backgroundImage:`url(${c(ee)("card-bg.jpg")})`})},null,4)],2))}}),V=te(Vt,[["__scopeId","data-v-cfbea0d8"]]),qt={grid:"~ cols-5 gap-5"},Pt=S({__name:"ComputedCard",setup(e){const t=R();return(n,s)=>(i(),u("div",qt,[(i(!0),u(N,null,W(c(t).computerCardItems,r=>(i(),u("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",key:r.sort},[h(V,{"card-info":r,"is-back":""},null,8,["card-info"])]))),128))]))}}),Wt={grid:"~ cols-5 gap-5"},Ut=S({__name:"PlayerCard",emits:["card-check"],setup(e,{expose:t,emit:n}){const s=R(),r=n,o=f=>{Dt(()=>{f.isBack=!0,setTimeout(()=>{r("card-check",f)},1e3)},3e3)};return t({cardCheckClick:o}),(f,d)=>(i(),u("div",Wt,[(i(!0),u(N,null,W(c(s).playerCardItems,v=>(i(),u("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"","hover:top--20px":"",key:v.sort,class:A([v.isClick?"top--20px":"top-0"])},[h(V,{"card-info":v,"is-back":v.isBack,onCardClick:o},null,8,["card-info","is-back"])],2))),128))]))}}),Ge=e=>(we("data-v-ad855f05"),e=e(),ye(),e),Ht={"box-border":"","w-full":"","h-full":"","flex-center":""},Jt={"p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd-12px":"",style:{"min-width":"600px"}},Qt={flex:"~ col gap-2"},Zt=Ge(()=>l("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),Kt=Ge(()=>l("span",null,"Back",-1)),Yt=[Zt,Kt],Xt=S({__name:"MessageInfo",props:{title:{default:()=>""},infoList:{default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=t;return(s,r)=>(i(),u("div",Ht,[l("div",Jt,[l("h3",null,F(s.title),1),l("div",Qt,[(i(!0),u(N,null,W(s.infoList,o=>(i(),u("p",{"font-size-7":"",key:o,class:A({"text-center":s.title==="制作人员"})},F(o),3))),128))]),l("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:r[0]||(r[0]=o=>n("close"))},Yt)])]))}}),Re=te(Xt,[["__scopeId","data-v-ad855f05"]]),en=S({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t,s=["游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌","皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）","奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）","游戏开始时随机分配角色，之后每一局角色轮换，共进行21局","玩家选择一张牌后，点击出牌，进行比较","皇帝赢市民，市民赢奴隶，奴隶赢皇帝","市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方","皇帝或奴隶被杀，游戏宣告结束，被杀方告负","赢则积1分，数则积0分，先赢到11分则游戏结束"];return(r,o)=>(i(),Se(Re,{title:"游戏说明","info-list":s,onClose:o[0]||(o[0]=f=>n("close"))}))}}),tn=S({__name:"ProducerList",emits:["close"],setup(e,{emit:t}){const n=t,s=["SmallTeddy","wh131462","remember-study","cangbaoderen","Yang-mingLei","Medalc","qingjiuge"];return(r,o)=>(i(),Se(Re,{title:"制作人员","info-list":s,onClose:o[0]||(o[0]=f=>n("close"))}))}}),nn={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},rn={key:0,flex:"~ col items-center gap-10"},sn={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},on={"text-green":""},ln={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},an={"text-red":""},un={key:1,"flex-col":"","flex-center":"","gap-5":""},cn={"flex-center":"","gap-10":""},dn={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},fn={key:2,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},fe=21,mn=S({__name:"GameMenu",setup(e,{expose:t}){const n=R(),s=I(!1),r=I(!0),o=I({playerRole:se(2)==0?"emperor":"slave",rounds:1}),f=E(()=>Ot(o.value.playerRole));de(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),o.value=n.value;const d=()=>{r.value=!0,o.value.rounds<=fe&&o.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},v=()=>{n.value.gameState==="win"||n.value.gameState==="lose"||(s.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,o.value.rounds>fe&&(s.value=!1)},2e3))},_=()=>{s.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",de(o.value.playerRole,o.value.rounds),o.value=n.value},p=E(()=>{let a;switch(n.value.gameState){case"pause":a="游戏继续";break;case"win":a="您赢了！";break;case"lose":a="您输了！";break;default:a="游戏开始"}return a}),g=I(!1),b=I(!1),w=()=>{r.value=!1,g.value=!0},k=()=>{r.value=!0,g.value=!1},x=()=>{r.value=!1,b.value=!0},$=()=>{r.value=!0,b.value=!1};return O(()=>n.value.gameState,a=>{a==="start"&&v(),["pause","win","lose"].includes(a)&&(r.value=!0,s.value=!1)},{immediate:!0}),t({reshow:d,show:r}),(a,L)=>{var T;return i(),u(N,null,[c(r)?(i(),u("div",nn,[c(s)?(i(),u("div",rn,[l("div",sn,[G(" 第 "),l("span",on,F((T=c(o))==null?void 0:T.rounds),1),G(" 局 ")]),l("div",ln,[G(" 角色 ： "),l("span",an,F(c(f)),1)])])):(i(),u("div",un,[l("button",{onClick:v},F(c(p)),1),c(n).gameState!=="init"?(i(),u("button",{key:0,onClick:_},"重新开始")):H("",!0),l("button",{onClick:w},"游戏说明"),l("button",{onClick:x},"制作人员"),l("div",cn,[h(V,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),h(V,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),h(V,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):H("",!0),c(g)?(i(),u("div",dn,[h(en,{onClose:k})])):H("",!0),c(b)?(i(),u("div",fn,[h(tn,{onClose:$})])):H("",!0)],64)}}}),pn={key:0},_n={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},vn=l("br",null,null,-1),gn=l("br",null,null,-1),hn=l("br",null,null,-1),me=S({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(i(),u("div",pn,[h(V,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(i(),u("div",_n,[G(" 检"),vn,G("查"),gn,G("区"),hn,G("域 ")]))}}),bn={key:0,"flex-center":"",relative:"","card-size":""},wn=["alt","src"],yn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},Sn=l("br",null,null,-1),xn=l("br",null,null,-1),kn=l("br",null,null,-1),Cn=S({__name:"DropCard",setup(e){const t=R();return(n,s)=>c(t).dropedCardItems.length>0?(i(),u("div",bn,[(i(!0),u(N,null,W(c(t).dropedCardItems,(r,o)=>(i(),u("div",{key:r.sort},[l("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:Z(`--rotation-random: ${c(se)(5*o)}deg`),alt:r.role,src:c(ee)(r.img)},null,12,wn)]))),128))])):(i(),u("div",yn,[G(" 弃"),Sn,G("牌"),xn,G("区"),kn,G("域 ")]))}}),$n={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},In={"w-full":"","bg-gray:50":"","flex-center":""},En={"bg-gray:50":"","flex-center":""},Fn={"w-full":"","bg-gray:50":"","flex-center":""},Gn={"w-full":"","bg-gray:50":"","flex-center":""},Rn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},zn={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},Ln={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},Mn=S({__name:"GameMain",setup(e){const t=R(),n=I(null),s=E(()=>t.value.playerRole),r=I(),o=I(),f=_=>{if(n.value.show)return;r.value&&t.value.dropedCardItems.push(r.value,o.value);const p=le(_);r.value=p,t.value.playerCardItems=t.value.playerCardItems.filter(w=>w.sort!==p.sort);const g=se(t.value.computerCardItems.length),b=le(t.value.computerCardItems[g]);o.value=b,t.value.computerCardItems=t.value.computerCardItems.filter(w=>w.sort!==b.sort),setTimeout(()=>{v(p,b)},1e3)},d=(_,p)=>{const b={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[_.role][p.role];return{round:t.value.rounds,role:s.value,result:b,playerScore:b==="win"?1:0,computerScore:b==="win"?0:1}},v=(_,p)=>{setTimeout(()=>{o.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(o.value=null,r.value=null,_.role===p.role)t.value.dropedCardItems.push(_,p);else{const g=d(_,p);t.value.gameLogItems.push(g),Nt(),n.value.reshow()}},2e3)};return O(()=>t.value.gameState,_=>{["init","win","lose"].includes(_)&&(t.value.rounds=0,t.value.dropedCardItems=[],t.value.gameLogItems=[])}),(_,p)=>(i(),u(N,null,[h(mn,{ref_key:"showGameMenuRef",ref:n},null,512),h(Ne,null,{default:Oe(()=>[l("div",{"h-full":"","w-screen":"",grid:"~",class:A([c(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[l("div",$n,[l("div",In,[h(Pt)]),l("div",En,[h(me,{"card-info":[c(o)]},null,8,["card-info"])]),l("div",Fn,[h(me,{"card-info":[c(r)]},null,8,["card-info"])]),l("div",Gn,[h(Ut,{onCardCheck:f})])]),he(l("div",Rn,[l("div",zn,[h(Gt)]),l("div",Ln,[h(Cn)])],512),[[be,c(t).isShowGameInfo]])],2)]),_:1})],64))}}),An=S({__name:"GameContent",setup(e){const t=R();return(n,s)=>(i(),u("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:Z({backgroundImage:`url(${c(ee)(`bg-${c(t).bgImage}.jpg`)})`})},[h(Mn)],4))}}),Tn={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},Bn=S({__name:"Home",setup(e){return(t,n)=>(i(),u("main",Tn,[h(kt),h(An)]))}});export{Bn as default};

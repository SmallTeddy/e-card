import{e as Ge,u as f,o as pe,n as _e,r as S,a as ve,w as T,g as ze,b as Ae,t as Me,c as je,d as ge,s as Le,f as E,h as Te,i as x,j as p,k as v,l as o,m as A,p as he,v as be,_ as K,q as b,F as X,x as we,y as z,z as ye,A as ke,B as H,C as Ce,D as Be,E as ae,G as re,H as F,T as Oe}from"./index-HQ_HkLQ_.js";function le(e){return ze()?(Ae(e),!0):!1}function Ne(e){let t=!1,n;const s=Ge(!0);return(...r)=>(t||(n=s.run(()=>e(...r)),t=!0),n)}function Y(e){return typeof e=="function"?e():f(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const De=Object.prototype.toString,Ve=e=>De.call(e)==="[object Object]",xe=()=>{};function Ue(e,t){function n(...s){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(a)})}return n}const Ie=e=>e();function We(e=Ie){const t=S(!0);function n(){t.value=!1}function s(){t.value=!0}const r=(...a)=>{t.value&&e(...a)};return{isActive:ve(t),pause:n,resume:s,eventFilter:r}}function qe(e){return e||ge()}function He(...e){if(e.length!==1)return Me(...e);const t=e[0];return typeof t=="function"?ve(je(()=>({get:t,set:xe}))):S(t)}function Pe(e,t,n={}){const{eventFilter:s=Ie,...r}=n;return T(e,Ue(s,t),r)}function Je(e,t,n={}){const{eventFilter:s,...r}=n,{eventFilter:a,pause:i,resume:d,isActive:u}=We(s);return{stop:Pe(e,t,{...r,eventFilter:a}),pause:i,resume:d,isActive:u}}function $e(e,t=!0,n){const s=qe(n);s?pe(e,s):t?e():_e(e)}function P(e){var t;const n=Y(e);return(t=n==null?void 0:n.$el)!=null?t:n}const D=Se?window:void 0,Qe=Se?window.document:void 0;function J(...e){let t,n,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,r]=e,t=D):[t,n,s,r]=e,!t)return xe;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const a=[],i=()=>{a.forEach(w=>w()),a.length=0},d=(w,l,h,y)=>(w.addEventListener(l,h,y),()=>w.removeEventListener(l,h,y)),u=T(()=>[P(t),Y(r)],([w,l])=>{if(i(),!w)return;const h=Ve(l)?{...l}:l;a.push(...n.flatMap(y=>s.map(_=>d(w,y,_,h))))},{immediate:!0,flush:"post"}),g=()=>{u(),i()};return le(g),g}function Ze(){const e=S(!1);return ge()&&pe(()=>{e.value=!0}),e}function Ee(e){const t=Ze();return E(()=>(t.value,!!e()))}function Ke(e,t={}){const{window:n=D}=t,s=Ee(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const a=S(!1),i=g=>{a.value=g.matches},d=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",i):r.removeListener(i))},u=Te(()=>{s.value&&(d(),r=n.matchMedia(Y(e)),"addEventListener"in r?r.addEventListener("change",i):r.addListener(i),a.value=r.matches)});return le(()=>{u(),d(),r=void 0}),a}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q="__vueuse_ssr_handlers__",Xe=Ye();function Ye(){return q in W||(W[q]=W[q]||{}),W[q]}function Fe(e,t){return Xe[e]||t}function et(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const tt={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ie="vueuse-storage";function Re(e,t,n,s={}){var r;const{flush:a="pre",deep:i=!0,listenToStorageChanges:d=!0,writeDefaults:u=!0,mergeDefaults:g=!1,shallow:w,window:l=D,eventFilter:h,onError:y=m=>{console.error(m)},initOnMounted:_}=s,k=(w?Le:S)(typeof t=="function"?t():t);if(!n)try{n=Fe("getDefaultStorage",()=>{var m;return(m=D)==null?void 0:m.localStorage})()}catch(m){y(m)}if(!n)return k;const I=Y(t),c=et(I),G=(r=s.serializer)!=null?r:tt[c],{pause:V,resume:$}=Je(k,()=>M(k.value),{flush:a,deep:i,eventFilter:h});return l&&d&&$e(()=>{J(l,"storage",R),J(l,ie,O),_&&R()}),_||R(),k;function M(m){try{if(m==null)n.removeItem(e);else{const C=G.write(m),j=n.getItem(e);j!==C&&(n.setItem(e,C),l&&l.dispatchEvent(new CustomEvent(ie,{detail:{key:e,oldValue:j,newValue:C,storageArea:n}})))}}catch(C){y(C)}}function U(m){const C=m?m.newValue:n.getItem(e);if(C==null)return u&&I!=null&&n.setItem(e,G.write(I)),I;if(!m&&g){const j=G.read(C);return typeof g=="function"?g(j,I):c==="object"&&!Array.isArray(j)?{...I,...j}:j}else return typeof C!="string"?C:G.read(C)}function O(m){R(m.detail)}function R(m){if(!(m&&m.storageArea!==n)){if(m&&m.key==null){k.value=I;return}if(!(m&&m.key!==e)){V();try{(m==null?void 0:m.newValue)!==G.write(k.value)&&(k.value=U(m))}catch(C){y(C)}finally{m?_e($):$()}}}}}function nt(e){return Ke("(prefers-color-scheme: dark)",e)}function rt(e={}){const{selector:t="html",attribute:n="class",initialValue:s="auto",window:r=D,storage:a,storageKey:i="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:u,emitAuto:g,disableTransition:w=!0}=e,l={auto:"",light:"light",dark:"dark",...e.modes||{}},h=nt({window:r}),y=E(()=>h.value?"dark":"light"),_=u||(i==null?He(s):Re(i,s,a,{window:r,listenToStorageChanges:d})),k=E(()=>_.value==="auto"?y.value:_.value),I=Fe("updateHTMLAttrs",($,M,U)=>{const O=typeof $=="string"?r==null?void 0:r.document.querySelector($):P($);if(!O)return;let R;if(w){R=r.document.createElement("style");const m="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";R.appendChild(document.createTextNode(m)),r.document.head.appendChild(R)}if(M==="class"){const m=U.split(/\s/g);Object.values(l).flatMap(C=>(C||"").split(/\s/g)).filter(Boolean).forEach(C=>{m.includes(C)?O.classList.add(C):O.classList.remove(C)})}else O.setAttribute(M,U);w&&(r.getComputedStyle(R).opacity,document.head.removeChild(R))});function c($){var M;I(t,n,(M=l[$])!=null?M:$)}function G($){e.onChanged?e.onChanged($,c):c($)}T(k,G,{flush:"post",immediate:!0}),$e(()=>G(k.value));const V=E({get(){return g?_.value:k.value},set($){_.value=$}});try{return Object.assign(V,{store:_,system:y,state:k})}catch{return V}}const ce=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function st(e,t={}){const{document:n=Qe,autoExit:s=!1}=t,r=E(()=>{var c;return(c=P(e))!=null?c:n==null?void 0:n.querySelector("html")}),a=S(!1),i=E(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(c=>n&&c in n||r.value&&c in r.value)),d=E(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(c=>n&&c in n||r.value&&c in r.value)),u=E(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(c=>n&&c in n||r.value&&c in r.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(c=>n&&c in n),w=Ee(()=>r.value&&n&&i.value!==void 0&&d.value!==void 0&&u.value!==void 0),l=()=>g?(n==null?void 0:n[g])===r.value:!1,h=()=>{if(u.value){if(n&&n[u.value]!=null)return n[u.value];{const c=r.value;if((c==null?void 0:c[u.value])!=null)return!!c[u.value]}}return!1};async function y(){if(!(!w.value||!a.value)){if(d.value)if((n==null?void 0:n[d.value])!=null)await n[d.value]();else{const c=r.value;(c==null?void 0:c[d.value])!=null&&await c[d.value]()}a.value=!1}}async function _(){if(!w.value||a.value)return;h()&&await y();const c=r.value;i.value&&(c==null?void 0:c[i.value])!=null&&(await c[i.value](),a.value=!0)}async function k(){await(a.value?y():_())}const I=()=>{const c=h();(!c||c&&l())&&(a.value=c)};return J(n,ce,I,!1),J(()=>P(r),ce,I,!1),s&&le(y),{isSupported:w,isFullscreen:a,enter:_,exit:y,toggle:k}}const B=Ne(()=>Re("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0})),ot=x({__name:"ChangeGameStatus",setup(e){const t=B(),n=()=>{t.value.gameState="pause"};return(s,r)=>(p(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[o("div",{class:A({"i-material-symbols:play-circle-rounded":f(t).gameState==="pause","i-material-symbols:pause-circle":f(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),at=x({__name:"GameInfoToggle",setup(e){const t=B(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(s,r)=>he((p(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[o("div",{class:A({"i-material-symbols:right-panel-close-rounded":f(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!f(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[be,f(t).gameState==="start"]])}}),lt=o("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),it=[lt],ct=x({__name:"ChangeBackImage",setup(e){const t=B(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(s,r)=>(p(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},it))}}),ut=x({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=st();return(s,r)=>(p(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...a)=>f(n)&&f(n)(...a))},[o("div",{class:A({"i-gridicons:fullscreen-exit":f(t),"i-gridicons:fullscreen":!f(t)}),"text-2xl":""},null,2)]))}}),dt=o("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),ft=[dt],mt=x({__name:"ColorSchemeToggle",setup(e){const t=rt(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(s,r)=>(p(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},ft))}}),pt={},_t={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},vt=o("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),gt=[vt];function ht(e,t){return p(),v("a",_t,gt)}const bt=K(pt,[["render",ht]]),wt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},yt=o("div",{title:"Game"},"E-Card",-1),kt=o("div",{"flex-auto":""},null,-1),Ct={__name:"GameNav",setup(e){return(t,n)=>(p(),v("nav",wt,[yt,kt,b(ot),b(bt),b(at),b(mt),b(ct),b(ut)]))}},ee=e=>(ye("data-v-312e5a55"),e=e(),ke(),e),St=ee(()=>o("tr",null,[o("td",null,"局数"),o("td",null,"角色"),o("td",null,"结果"),o("td",null,"记分")],-1)),xt=ee(()=>o("td",null,"总比分",-1)),It=ee(()=>o("td",null,null,-1)),$t=ee(()=>o("td",null,null,-1)),Et=x({__name:"GameInformation",props:{gameInfoItems:{default:()=>[]}},setup(e){const n=e.gameInfoItems,s=E(()=>n.reduce((r,a)=>r+a.score,0));return(r,a)=>(p(),v("table",null,[St,(p(!0),v(X,null,we(f(n),i=>(p(),v("tr",{class:A(i.score?"bg-green":"bg-red")},[o("td",null,z(i.round),1),o("td",null,z(i.role),1),o("td",null,z(i.result),1),o("td",null,z(i.score),1)],2))),256)),o("tr",null,[xt,It,$t,o("td",null,z(f(s)),1)])]))}}),Ft=K(Et,[["__scopeId","data-v-312e5a55"]]),Rt=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,Gt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,zt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,At=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,Mt=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,jt=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,Lt=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,Tt=""+new URL("PingFangMedium-SeRS6mht.ttf",import.meta.url).href,Bt=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,L=B(),Ot=e=>e=="emperor"?"国王":"奴隶",ue=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),Q=(e,t=!0)=>{const n=Array(5).fill(0).map((r,a)=>ue("citizen",a+1,e)),s=te(5);return n[s]=ue(e,s+1,e),n.map(r=>r.isBack=!t),n},se=e=>e=="emperor"?"slave":"emperor",de=(e,t)=>{L.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:Q(e,!0),computerCardItems:Q(se(e),!1),bgImage:1,isShowGameInfo:!0}},Nt=()=>{const e=se(L.value.playerRole),t=L.value.rounds+1;L.value.playerRole=e,L.value.rounds=t,L.value.playerCardItems=Q(e,!0),L.value.computerCardItems=Q(se(e),!1)},Z=e=>new URL(Object.assign({"../assets/bg-1.jpg":Rt,"../assets/bg-2.jpg":Gt,"../assets/bg-3.jpg":zt,"../assets/bg-4.jpg":At,"../assets/card-bg.jpg":Mt,"../assets/citizen.jpg":jt,"../assets/emperor.jpg":Lt,"../assets/fonts/PingFangMedium.ttf":Tt,"../assets/slave.jpg":Bt})[`../assets/${e}`],import.meta.url).href,te=e=>(Math.floor(Math.random()*e)+1)%e,oe=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let s in e)e.hasOwnProperty(s)&&(n[s]=oe(e[s],t));return n},Dt=x({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(s,r)=>(p(),v("div",{class:A({"card-animation":s.isAnimation,"card-back":s.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=a=>n("card-click",s.cardInfo))},[o("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:H({backgroundImage:`url(${f(Z)(s.cardInfo.img)})`})},null,4),o("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:H({backgroundImage:`url(${f(Z)("card-bg.jpg")})`})},null,4)],2))}}),N=K(Dt,[["__scopeId","data-v-cfbea0d8"]]),Vt={grid:"~ cols-5 gap-5"},Ut=x({__name:"ComputedCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const s=e,r=n,a=S();return T(()=>s.cardItems,d=>{a.value=d},{immediate:!0}),t({cardCheckClick:d=>{a.value=a.value.filter(u=>u.sort!==d.sort),r("card-check",d)}}),(d,u)=>(p(),v("div",Vt,[(p(!0),v(X,null,we(d.cardItems,(g,w)=>(p(),v("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([g.isClick?"top--20px":"top-0",g.group,g.role+w])},[b(N,{"card-info":g,"is-back":""},null,8,["card-info"])],2))),256))]))}}),Wt={key:0,"text-center":""},qt=["onClick"],Ht=x({__name:"PlayerCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const s=e,r=n,a=S();T(()=>s.cardItems,u=>{a.value=u},{immediate:!0});const i=u=>{a.value.map(g=>g.isClick=!1),u.isClick=!0},d=u=>{u.isBack=!0,setTimeout(()=>{r("card-check",u)},1e3)};return t({cardCheckClick:d}),(u,g)=>{const w=Ce("draggable");return p(),Be(w,{list:u.cardItems,tag:"div",group:{name:u.role,pull:!0,put:!1,revertClone:!0},"component-data":{grid:"~ cols-5 gap-5"},"item-key":"sort",sort:!0},{item:ae(({element:l,index:h})=>[o("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([l.isClick?"top--20px":"top-0",l.group,l.role+h])},[b(N,{cardInfo:l,"is-back":l.isBack,onCardClick:i},null,8,["cardInfo","is-back"]),l.isClick?(p(),v("div",Wt,[o("button",{onClick:y=>d(l)},"check",8,qt)])):re("",!0)],2)]),_:1},8,["list","group"])}}}),ne=e=>(ye("data-v-e7837d18"),e=e(),ke(),e),Pt={class:"game-explain","w-full":"","h-full":"","flex-center":""},Jt={class:"card",flex:"~ col items-center gap-10","bg-color":""},Qt=ne(()=>o("h3",null,"游戏说明",-1)),Zt=ne(()=>o("div",{flex:"~ col"},[o("p",null,"游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌"),o("p",null,"皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）"),o("p",null,"奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）"),o("p",null,"游戏开始时随机分配角色，之后每一局角色轮换，共进行21局"),o("p",null,"玩家选择一张牌后，点击check出牌，进行比较"),o("p",null,"皇帝赢市民，市民赢奴隶，奴隶赢皇帝"),o("p",null,"市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方"),o("p",null,"皇帝或奴隶被杀，游戏宣告结束，被杀方告负，"),o("p",null,"赢则积1分，数则积0分，先赢到11分则游戏结束")],-1)),Kt=ne(()=>o("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),Xt=ne(()=>o("span",null,"Back",-1)),Yt=[Kt,Xt],en=x({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t;return(s,r)=>(p(),v("div",Pt,[o("div",Jt,[Qt,Zt,o("button",{class:"btn",onClick:r[0]||(r[0]=a=>n("close"))},Yt)])]))}}),tn=K(en,[["__scopeId","data-v-e7837d18"]]),nn={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},rn={key:0,flex:"~ col items-center gap-10"},sn={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},on={"text-green":""},an={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},ln={"text-red":""},cn={key:1,"flex-col":"","flex-center":"","gap-5":""},un={"flex-center":"","gap-10":""},dn={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},fe=21,fn=x({__name:"GameMenu",setup(e,{expose:t}){const n=B(),s=S(!1),r=S(!0),a=S({playerRole:te(2)==0?"emperor":"slave",rounds:1}),i=E(()=>Ot(a.value.playerRole));de(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),a.value=n.value;const d=()=>{r.value=!0,a.value.rounds<=fe&&a.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},u=()=>{s.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,a.value.rounds>fe&&(s.value=!1)},2e3)},g=()=>{s.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",de(a.value.playerRole,a.value.rounds),a.value=n.value},w=()=>{let _="开始";return n.value.gameState==="pause"&&(_="继续"),_},l=S(!1),h=()=>{r.value=!1,l.value=!0},y=()=>{r.value=!0,l.value=!1};return T(()=>n.value.gameState,_=>{s.value=_==="start",_==="start"&&u(),_==="pause"&&(r.value=!0)},{immediate:!0}),t({reshow:d}),(_,k)=>{var I;return p(),v(X,null,[f(r)?(p(),v("div",nn,[f(s)?(p(),v("div",rn,[o("div",sn,[F(" 第 "),o("span",on,z((I=f(a))==null?void 0:I.rounds),1),F(" 局 ")]),o("div",an,[F(" 角色 ： "),o("span",ln,z(f(i)),1)])])):(p(),v("div",cn,[o("button",{onClick:u},z(w()),1),o("button",{onClick:g},"重新开始"),o("button",{onClick:h},"游戏说明"),o("div",un,[b(N,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),b(N,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),b(N,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):re("",!0),f(l)?(p(),v("div",dn,[b(tn,{onClose:y})])):re("",!0)],64)}}}),mn={key:0},pn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},_n=o("br",null,null,-1),vn=o("br",null,null,-1),gn=o("br",null,null,-1),me=x({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(p(),v("div",mn,[b(N,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(p(),v("div",pn,[F(" 检"),_n,F("查"),vn,F("区"),gn,F("域 ")]))}}),hn={key:0,"flex-center":"",relative:"","card-size":""},bn=["alt","src"],wn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},yn=o("br",null,null,-1),kn=o("br",null,null,-1),Cn=o("br",null,null,-1),Sn=x({__name:"DropCard",props:{cardItems:{default:()=>[]}},setup(e){return(t,n)=>{const s=Ce("draggable");return t.cardItems.length>0?(p(),v("div",hn,[b(s,{list:t.cardItems,group:"drop","item-key":"sort"},{item:ae(({element:r,index:a})=>[o("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:H(`--rotation-random: ${f(te)(5*a)}deg`),alt:r.role,src:f(Z)(r.img)},null,12,bn)]),_:1},8,["list"])])):(p(),v("div",wn,[F(" 弃"),yn,F("牌"),kn,F("区"),Cn,F("域 ")]))}}}),xn={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},In={"w-full":"","bg-gray:50":"","flex-center":""},$n={"bg-gray:50":"","flex-center":""},En={"w-full":"","bg-gray:50":"","flex-center":""},Fn={"w-full":"","bg-gray:50":"","flex-center":""},Rn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},Gn={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},zn={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},An=x({__name:"GameMain",setup(e){const t=B(),n=S(null),s=E(()=>t.value.playerRole),r=S(),a=S(),i=S([]),d=S([]),u=l=>{r.value&&i.value.push(r.value,a.value);const h=oe(l);r.value=h,t.value.playerCardItems=t.value.playerCardItems.filter(k=>k.sort!==h.sort);const y=te(t.value.computerCardItems.length),_=oe(t.value.computerCardItems[y]);a.value=_,t.value.computerCardItems=t.value.computerCardItems.filter(k=>k.sort!==_.sort),setTimeout(()=>{w(h,_)},1e3)},g=(l,h)=>{const _={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[l.role][h.role];return{round:t.value.rounds,role:s.value,result:_,score:_==="win"?1:0}},w=(l,h)=>{setTimeout(()=>{a.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(a.value=null,r.value=null,l.role===h.role)i.value.push(l,h);else{const y=g(l,h);d.value.push(y),i.value=[],Nt(),n.value.reshow()}},2e3)};return T(()=>t.value.gameState,l=>{l==="init"&&(i.value=[],d.value=[])}),(l,h)=>(p(),v(X,null,[b(fn,{ref_key:"showGameMenuRef",ref:n},null,512),b(Oe,null,{default:ae(()=>[o("div",{"h-full":"","w-screen":"",grid:"~",class:A([f(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[o("div",xn,[o("div",In,[b(Ut,{role:"slave",cardItems:f(t).computerCardItems},null,8,["cardItems"])]),o("div",$n,[b(me,{"card-info":[f(a)]},null,8,["card-info"])]),o("div",En,[b(me,{"card-info":[f(r)]},null,8,["card-info"])]),o("div",Fn,[b(Ht,{role:"emperor",cardItems:f(t).playerCardItems,onCardCheck:u},null,8,["cardItems"])])]),he(o("div",Rn,[o("div",Gn,[b(Ft,{"game-info-items":f(d)},null,8,["game-info-items"])]),o("div",zn,[b(Sn,{cardItems:f(i)},null,8,["cardItems"])])],512),[[be,f(t).isShowGameInfo]])],2)]),_:1})],64))}}),Mn=x({__name:"GameContent",setup(e){const t=B();return(n,s)=>(p(),v("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:H({backgroundImage:`url(${f(Z)(`bg-${f(t).bgImage}.jpg`)})`})},[b(An)],4))}}),jn={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},Tn=x({__name:"Home",setup(e){return(t,n)=>(p(),v("main",jn,[b(Ct),b(Mn)]))}});export{Tn as default};

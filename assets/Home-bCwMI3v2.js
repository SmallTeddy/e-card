import{e as Re,u as d,o as ge,n as he,r as I,a as be,w as O,g as ze,b as Ge,t as Le,c as Me,d as we,s as Ae,f as F,h as je,i as x,j as u,k as c,l as s,m as N,p as ye,v as xe,_ as W,q as g,F as A,x as P,y as E,z as ae,A as le,B as Z,C as R,D as H,E as Te,T as Be}from"./index-rzZ9Rw1K.js";function ie(e){return ze()?(Ge(e),!0):!1}function Oe(e){let t=!1,n;const o=Re(!0);return(...r)=>(t||(n=o.run(()=>e(...r)),t=!0),n)}function te(e){return typeof e=="function"?e():d(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ne=Object.prototype.toString,De=e=>Ne.call(e)==="[object Object]",ke=()=>{};function Ve(e,t){function n(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return n}const Ce=e=>e();function Pe(e=Ce){const t=I(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...a)=>{t.value&&e(...a)};return{isActive:be(t),pause:n,resume:o,eventFilter:r}}function Ue(e){return e||we()}function We(...e){if(e.length!==1)return Le(...e);const t=e[0];return typeof t=="function"?be(Me(()=>({get:t,set:ke}))):I(t)}function qe(e,t,n={}){const{eventFilter:o=Ce,...r}=n;return O(e,Ve(o,t),r)}function He(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:a,pause:i,resume:w,isActive:_}=Pe(o);return{stop:qe(e,t,{...r,eventFilter:a}),pause:i,resume:w,isActive:_}}function $e(e,t=!0,n){const o=Ue(n);o?ge(e,o):t?e():he(e)}function K(e){var t;const n=te(e);return(t=n==null?void 0:n.$el)!=null?t:n}const U=Se?window:void 0,Je=Se?window.document:void 0;function X(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=U):[t,n,o,r]=e,!t)return ke;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],i=()=>{a.forEach(m=>m()),a.length=0},w=(m,v,h,b)=>(m.addEventListener(v,h,b),()=>m.removeEventListener(v,h,b)),_=O(()=>[K(t),te(r)],([m,v])=>{if(i(),!m)return;const h=De(v)?{...v}:v;a.push(...n.flatMap(b=>o.map(k=>w(m,b,k,h))))},{immediate:!0,flush:"post"}),p=()=>{_(),i()};return ie(p),p}function Qe(){const e=I(!1);return we()&&ge(()=>{e.value=!0}),e}function Ie(e){const t=Qe();return F(()=>(t.value,!!e()))}function Ze(e,t={}){const{window:n=U}=t,o=Ie(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const a=I(!1),i=p=>{a.value=p.matches},w=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",i):r.removeListener(i))},_=je(()=>{o.value&&(w(),r=n.matchMedia(te(e)),"addEventListener"in r?r.addEventListener("change",i):r.addListener(i),a.value=r.matches)});return ie(()=>{_(),w(),r=void 0}),a}const J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q="__vueuse_ssr_handlers__",Ke=Xe();function Xe(){return Q in J||(J[Q]=J[Q]||{}),J[Q]}function Fe(e,t){return Ke[e]||t}function Ye(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const et={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},de="vueuse-storage";function Ee(e,t,n,o={}){var r;const{flush:a="pre",deep:i=!0,listenToStorageChanges:w=!0,writeDefaults:_=!0,mergeDefaults:p=!1,shallow:m,window:v=U,eventFilter:h,onError:b=f=>{console.error(f)},initOnMounted:k}=o,S=(m?Ae:I)(typeof t=="function"?t():t);if(!n)try{n=Fe("getDefaultStorage",()=>{var f;return(f=U)==null?void 0:f.localStorage})()}catch(f){b(f)}if(!n)return S;const $=te(t),l=Ye($),L=(r=o.serializer)!=null?r:et[l],{pause:j,resume:C}=He(S,()=>T(S.value),{flush:a,deep:i,eventFilter:h});return v&&w&&$e(()=>{X(v,"storage",G),X(v,de,D),k&&G()}),k||G(),S;function T(f){try{if(f==null)n.removeItem(e);else{const y=L.write(f),B=n.getItem(e);B!==y&&(n.setItem(e,y),v&&v.dispatchEvent(new CustomEvent(de,{detail:{key:e,oldValue:B,newValue:y,storageArea:n}})))}}catch(y){b(y)}}function q(f){const y=f?f.newValue:n.getItem(e);if(y==null)return _&&$!=null&&n.setItem(e,L.write($)),$;if(!f&&p){const B=L.read(y);return typeof p=="function"?p(B,$):l==="object"&&!Array.isArray(B)?{...$,...B}:B}else return typeof y!="string"?y:L.read(y)}function D(f){G(f.detail)}function G(f){if(!(f&&f.storageArea!==n)){if(f&&f.key==null){S.value=$;return}if(!(f&&f.key!==e)){j();try{(f==null?void 0:f.newValue)!==L.write(S.value)&&(S.value=q(f))}catch(y){b(y)}finally{f?he(C):C()}}}}}function tt(e){return Ze("(prefers-color-scheme: dark)",e)}function nt(e={}){const{selector:t="html",attribute:n="class",initialValue:o="auto",window:r=U,storage:a,storageKey:i="vueuse-color-scheme",listenToStorageChanges:w=!0,storageRef:_,emitAuto:p,disableTransition:m=!0}=e,v={auto:"",light:"light",dark:"dark",...e.modes||{}},h=tt({window:r}),b=F(()=>h.value?"dark":"light"),k=_||(i==null?We(o):Ee(i,o,a,{window:r,listenToStorageChanges:w})),S=F(()=>k.value==="auto"?b.value:k.value),$=Fe("updateHTMLAttrs",(C,T,q)=>{const D=typeof C=="string"?r==null?void 0:r.document.querySelector(C):K(C);if(!D)return;let G;if(m){G=r.document.createElement("style");const f="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";G.appendChild(document.createTextNode(f)),r.document.head.appendChild(G)}if(T==="class"){const f=q.split(/\s/g);Object.values(v).flatMap(y=>(y||"").split(/\s/g)).filter(Boolean).forEach(y=>{f.includes(y)?D.classList.add(y):D.classList.remove(y)})}else D.setAttribute(T,q);m&&(r.getComputedStyle(G).opacity,document.head.removeChild(G))});function l(C){var T;$(t,n,(T=v[C])!=null?T:C)}function L(C){e.onChanged?e.onChanged(C,l):l(C)}O(S,L,{flush:"post",immediate:!0}),$e(()=>L(S.value));const j=F({get(){return p?k.value:S.value},set(C){k.value=C}});try{return Object.assign(j,{store:k,system:b,state:S})}catch{return j}}const fe=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function rt(e,t={}){const{document:n=Je,autoExit:o=!1}=t,r=F(()=>{var l;return(l=K(e))!=null?l:n==null?void 0:n.querySelector("html")}),a=I(!1),i=F(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(l=>n&&l in n||r.value&&l in r.value)),w=F(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(l=>n&&l in n||r.value&&l in r.value)),_=F(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(l=>n&&l in n||r.value&&l in r.value)),p=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(l=>n&&l in n),m=Ie(()=>r.value&&n&&i.value!==void 0&&w.value!==void 0&&_.value!==void 0),v=()=>p?(n==null?void 0:n[p])===r.value:!1,h=()=>{if(_.value){if(n&&n[_.value]!=null)return n[_.value];{const l=r.value;if((l==null?void 0:l[_.value])!=null)return!!l[_.value]}}return!1};async function b(){if(!(!m.value||!a.value)){if(w.value)if((n==null?void 0:n[w.value])!=null)await n[w.value]();else{const l=r.value;(l==null?void 0:l[w.value])!=null&&await l[w.value]()}a.value=!1}}async function k(){if(!m.value||a.value)return;h()&&await b();const l=r.value;i.value&&(l==null?void 0:l[i.value])!=null&&(await l[i.value](),a.value=!0)}async function S(){await(a.value?b():k())}const $=()=>{const l=h();(!l||l&&v())&&(a.value=l)};return X(n,fe,$,!1),X(()=>K(r),fe,$,!1),o&&ie(b),{isSupported:m,isFullscreen:a,enter:k,exit:b,toggle:S}}const z=Oe(()=>Ee("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]})),ot=x({__name:"ChangeGameStatus",setup(e){const t=z(),n=()=>{t.value.gameState="pause"};return(o,r)=>(u(),c("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[s("div",{class:N({"i-material-symbols:play-circle-rounded":d(t).gameState==="pause","i-material-symbols:pause-circle":d(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),st=x({__name:"GameInfoToggle",setup(e){const t=z(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(o,r)=>ye((u(),c("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[s("div",{class:N({"i-material-symbols:right-panel-close-rounded":d(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!d(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[xe,d(t).gameState==="start"]])}}),at=s("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),lt=[at],it=x({__name:"ChangeBackImage",setup(e){const t=z(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(o,r)=>(u(),c("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},lt))}}),ut=x({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=rt();return(o,r)=>(u(),c("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...a)=>d(n)&&d(n)(...a))},[s("div",{class:N({"i-gridicons:fullscreen-exit":d(t),"i-gridicons:fullscreen":!d(t)}),"text-2xl":""},null,2)]))}}),ct=s("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),dt=[ct],ft=x({__name:"ColorSchemeToggle",setup(e){const t=nt(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(o,r)=>(u(),c("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},dt))}}),mt={},pt={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},_t=s("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),vt=[_t];function gt(e,t){return u(),c("a",pt,vt)}const ht=W(mt,[["render",gt]]),bt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},wt=s("div",{title:"Game"},"E-Card",-1),yt=s("div",{"flex-auto":""},null,-1),xt={__name:"GameNav",setup(e){return(t,n)=>(u(),c("nav",bt,[wt,yt,g(ot),g(ht),g(st),g(ft),g(it),g(ut)]))}},ne=e=>(ae("data-v-7be64a11"),e=e(),le(),e),St=ne(()=>s("tr",null,[s("td",null,"局数"),s("td",null,"角色"),s("td",null,"结果"),s("td",null,"玩家"),s("td",null,"电脑")],-1)),kt=ne(()=>s("td",null,"总比分",-1)),Ct=ne(()=>s("td",null,null,-1)),$t=ne(()=>s("td",null,null,-1)),It=x({__name:"GameInformation",setup(e){const t=z(),n=F(()=>t.value.gameLogItems.reduce((r,a)=>r+a.playerScore,0)),o=F(()=>t.value.gameLogItems.reduce((r,a)=>r+a.computerScore,0));return O(()=>n.value,r=>{r===11&&(t.value.gameState="win")},{immediate:!0}),O(()=>o.value,r=>{r===11&&(t.value.gameState="lose")},{immediate:!0}),(r,a)=>(u(),c("table",null,[St,(u(!0),c(A,null,P(d(t).gameLogItems,i=>(u(),c("tr",{key:`${i.role}-${i.sort}`,class:N(i.playerScore?"bg-green":"bg-red")},[s("td",null,E(i.round),1),s("td",null,E(i.role),1),s("td",null,E(i.result),1),s("td",null,E(i.playerScore),1),s("td",null,E(i.computerScore),1)],2))),128)),s("tr",null,[kt,Ct,$t,s("td",null,E(d(n)),1),s("td",null,E(d(o)),1)])]))}}),Ft=W(It,[["__scopeId","data-v-7be64a11"]]),Et=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,Rt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,zt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,Gt=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,Lt=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,Mt=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,At=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,jt=""+new URL("PingFangMedium-SeRS6mht.ttf",import.meta.url).href,Tt=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,M=z(),Bt=e=>e=="emperor"?"国王":"奴隶",me=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),Y=(e,t=!0)=>{const n=Array(5).fill(0).map((r,a)=>me("citizen",a+1,e)),o=re(5);return n[o]=me(e,o+1,e),n.map(r=>r.isBack=!t),n},oe=e=>e=="emperor"?"slave":"emperor",pe=(e,t)=>{M.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:Y(e,!0),computerCardItems:Y(oe(e),!1),bgImage:1,isShowGameInfo:!0,gameLogItems:[],dropedCardItems:[]}},Ot=()=>{const e=oe(M.value.playerRole),t=M.value.rounds+1;M.value.playerRole=e,M.value.rounds=t,M.value.playerCardItems=Y(e,!0),M.value.computerCardItems=Y(oe(e),!1),M.value.dropedCardItems=[]},ee=e=>new URL(Object.assign({"../assets/bg-1.jpg":Et,"../assets/bg-2.jpg":Rt,"../assets/bg-3.jpg":zt,"../assets/bg-4.jpg":Gt,"../assets/card-bg.jpg":Lt,"../assets/citizen.jpg":Mt,"../assets/emperor.jpg":At,"../assets/fonts/PingFangMedium.ttf":jt,"../assets/slave.jpg":Tt})[`../assets/${e}`],import.meta.url).href,re=e=>(Math.floor(Math.random()*e)+1)%e,se=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let o in e)e.hasOwnProperty(o)&&(n[o]=se(e[o],t));return n},Nt=x({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(o,r)=>(u(),c("div",{class:N({"card-animation":o.isAnimation,"card-back":o.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=a=>n("card-click",o.cardInfo))},[s("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:Z({backgroundImage:`url(${d(ee)(o.cardInfo.img)})`})},null,4),s("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:Z({backgroundImage:`url(${d(ee)("card-bg.jpg")})`})},null,4)],2))}}),V=W(Nt,[["__scopeId","data-v-cfbea0d8"]]),Dt={grid:"~ cols-5 gap-5"},Vt=x({__name:"ComputedCard",setup(e){const t=z();return(n,o)=>(u(),c("div",Dt,[(u(!0),c(A,null,P(d(t).computerCardItems,r=>(u(),c("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",key:r.sort},[g(V,{"card-info":r,"is-back":""},null,8,["card-info"])]))),128))]))}}),Pt={grid:"~ cols-5 gap-5"},Ut=x({__name:"PlayerCard",emits:["card-check"],setup(e,{expose:t,emit:n}){const o=z(),r=n,a=i=>{i.isBack=!0,setTimeout(()=>{r("card-check",i)},1e3)};return t({cardCheckClick:a}),(i,w)=>(u(),c("div",Pt,[(u(!0),c(A,null,P(d(o).playerCardItems,_=>(u(),c("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"","hover:top--20px":"",key:_.sort,class:N([_.isClick?"top--20px":"top-0"])},[g(V,{"card-info":_,"is-back":_.isBack,onCardClick:a},null,8,["card-info","is-back"])],2))),128))]))}}),ue=e=>(ae("data-v-0127dca5"),e=e(),le(),e),Wt={"box-border":"","w-full":"","h-full":"","flex-center":""},qt={"p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd":""},Ht=ue(()=>s("h3",null,"游戏说明",-1)),Jt={flex:"~ col gap-2"},Qt=ue(()=>s("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),Zt=ue(()=>s("span",null,"Back",-1)),Kt=[Qt,Zt],Xt=x({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t,o=["游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌","皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）","奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）","游戏开始时随机分配角色，之后每一局角色轮换，共进行21局","玩家选择一张牌后，点击出牌，进行比较","皇帝赢市民，市民赢奴隶，奴隶赢皇帝","市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方","皇帝或奴隶被杀，游戏宣告结束，被杀方告负","赢则积1分，数则积0分，先赢到11分则游戏结束"];return(r,a)=>(u(),c("div",Wt,[s("div",qt,[Ht,s("div",Jt,[(u(),c(A,null,P(o,i=>s("p",{"font-size-7":"",key:i},E(i),1)),64))]),s("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:a[0]||(a[0]=i=>n("close"))},Kt)])]))}}),Yt=W(Xt,[["__scopeId","data-v-0127dca5"]]),ce=e=>(ae("data-v-6dd6d676"),e=e(),le(),e),en={"box-border":"","w-full":"","h-full":"","flex-center":""},tn={"w-600px":"","p-4":"","box-border":"",flex:"~ col items-center gap-8","bg-Mask":"","border-rd":""},nn=ce(()=>s("h3",null,"制作人员",-1)),rn={flex:"~ col gap-2"},on=ce(()=>s("div",{class:"i-material-symbols:arrow-back-rounded icon"},null,-1)),sn=ce(()=>s("span",null,"Back",-1)),an=[on,sn],ln=x({__name:"ProducerList",emits:["close"],setup(e,{emit:t}){const n=t,o=["SmallTeddy"];return(r,a)=>(u(),c("div",en,[s("div",tn,[nn,s("div",rn,[(u(),c(A,null,P(o,i=>s("p",{"font-size-7":"",key:i},E(i),1)),64))]),s("button",{"m-l-a":"","p-2":"","font-size-8":"","border-rd":"","border-none":"","t-a-2":"","cursor-pointer":"","l-s-1":"",flex:"~ row items-center",onClick:a[0]||(a[0]=i=>n("close"))},an)])]))}}),un=W(ln,[["__scopeId","data-v-6dd6d676"]]),cn={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},dn={key:0,flex:"~ col items-center gap-10"},fn={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},mn={"text-green":""},pn={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},_n={"text-red":""},vn={key:1,"flex-col":"","flex-center":"","gap-5":""},gn={"flex-center":"","gap-10":""},hn={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},bn={key:2,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},_e=21,wn=x({__name:"GameMenu",setup(e,{expose:t}){const n=z(),o=I(!1),r=I(!0),a=I({playerRole:re(2)==0?"emperor":"slave",rounds:1}),i=F(()=>Bt(a.value.playerRole));pe(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),a.value=n.value;const w=()=>{r.value=!0,a.value.rounds<=_e&&a.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},_=()=>{n.value.gameState==="win"||n.value.gameState==="lose"||(o.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,a.value.rounds>_e&&(o.value=!1)},2e3))},p=()=>{o.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",pe(a.value.playerRole,a.value.rounds),a.value=n.value},m=F(()=>{let l;switch(n.value.gameState){case"pause":l="游戏继续";break;case"win":l="您赢了！";break;case"lose":l="您输了！";break;default:l="游戏开始"}return l}),v=I(!1),h=I(!1),b=()=>{r.value=!1,v.value=!0},k=()=>{r.value=!0,v.value=!1},S=()=>{r.value=!1,h.value=!0},$=()=>{r.value=!0,h.value=!1};return O(()=>n.value.gameState,l=>{l==="start"&&_(),["pause","win","lose"].includes(l)&&(r.value=!0,o.value=!1)},{immediate:!0}),t({reshow:w}),(l,L)=>{var j;return u(),c(A,null,[d(r)?(u(),c("div",cn,[d(o)?(u(),c("div",dn,[s("div",fn,[R(" 第 "),s("span",mn,E((j=d(a))==null?void 0:j.rounds),1),R(" 局 ")]),s("div",pn,[R(" 角色 ： "),s("span",_n,E(d(i)),1)])])):(u(),c("div",vn,[s("button",{onClick:_},E(d(m)),1),d(n).gameState!=="init"?(u(),c("button",{key:0,onClick:p},"重新开始")):H("",!0),s("button",{onClick:b},"游戏说明"),s("button",{onClick:S},"制作人员"),s("div",gn,[g(V,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),g(V,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),g(V,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):H("",!0),d(v)?(u(),c("div",hn,[g(Yt,{onClose:k})])):H("",!0),d(h)?(u(),c("div",bn,[g(un,{onClose:$})])):H("",!0)],64)}}}),yn={key:0},xn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},Sn=s("br",null,null,-1),kn=s("br",null,null,-1),Cn=s("br",null,null,-1),ve=x({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(u(),c("div",yn,[g(V,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(u(),c("div",xn,[R(" 检"),Sn,R("查"),kn,R("区"),Cn,R("域 ")]))}}),$n={key:0,"flex-center":"",relative:"","card-size":""},In=["alt","src"],Fn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},En=s("br",null,null,-1),Rn=s("br",null,null,-1),zn=s("br",null,null,-1),Gn=x({__name:"DropCard",setup(e){const t=z();return(n,o)=>d(t).dropedCardItems.length>0?(u(),c("div",$n,[(u(!0),c(A,null,P(d(t).dropedCardItems,(r,a)=>(u(),c("div",{key:r.sort},[s("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:Z(`--rotation-random: ${d(re)(5*a)}deg`),alt:r.role,src:d(ee)(r.img)},null,12,In)]))),128))])):(u(),c("div",Fn,[R(" 弃"),En,R("牌"),Rn,R("区"),zn,R("域 ")]))}}),Ln={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},Mn={"w-full":"","bg-gray:50":"","flex-center":""},An={"bg-gray:50":"","flex-center":""},jn={"w-full":"","bg-gray:50":"","flex-center":""},Tn={"w-full":"","bg-gray:50":"","flex-center":""},Bn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},On={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},Nn={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},Dn=x({__name:"GameMain",setup(e){const t=z(),n=I(null),o=F(()=>t.value.playerRole),r=I(),a=I(),i=p=>{r.value&&t.value.dropedCardItems.push(r.value,a.value);const m=se(p);r.value=m,t.value.playerCardItems=t.value.playerCardItems.filter(b=>b.sort!==m.sort);const v=re(t.value.computerCardItems.length),h=se(t.value.computerCardItems[v]);a.value=h,t.value.computerCardItems=t.value.computerCardItems.filter(b=>b.sort!==h.sort),setTimeout(()=>{_(m,h)},1e3)},w=(p,m)=>{const h={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[p.role][m.role];return{round:t.value.rounds,role:o.value,result:h,playerScore:h==="win"?1:0,computerScore:h==="win"?0:1}},_=(p,m)=>{setTimeout(()=>{a.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(a.value=null,r.value=null,p.role===m.role)t.value.dropedCardItems.push(p,m);else{const v=w(p,m);t.value.gameLogItems.push(v),Ot(),n.value.reshow()}},2e3)};return O(()=>t.value.gameState,p=>{["init","win","lose"].includes(p)&&(t.value.dropedCardItems=[],t.value.gameLogItems=[])}),(p,m)=>(u(),c(A,null,[g(wn,{ref_key:"showGameMenuRef",ref:n},null,512),g(Be,null,{default:Te(()=>[s("div",{"h-full":"","w-screen":"",grid:"~",class:N([d(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[s("div",Ln,[s("div",Mn,[g(Vt)]),s("div",An,[g(ve,{"card-info":[d(a)]},null,8,["card-info"])]),s("div",jn,[g(ve,{"card-info":[d(r)]},null,8,["card-info"])]),s("div",Tn,[g(Ut,{onCardCheck:i})])]),ye(s("div",Bn,[s("div",On,[g(Ft)]),s("div",Nn,[g(Gn)])],512),[[xe,d(t).isShowGameInfo]])],2)]),_:1})],64))}}),Vn=x({__name:"GameContent",setup(e){const t=z();return(n,o)=>(u(),c("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:Z({backgroundImage:`url(${d(ee)(`bg-${d(t).bgImage}.jpg`)})`})},[g(Dn)],4))}}),Pn={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},Wn=x({__name:"Home",setup(e){return(t,n)=>(u(),c("main",Pn,[g(xt),g(Vn)]))}});export{Wn as default};

import{e as Ee,u as f,o as pe,n as me,r as x,a as _e,w as T,g as Fe,b as Re,t as Ge,c as ze,d as ve,s as Ae,f as E,h as Me,i as S,j as m,k as v,l as o,m as A,p as ge,v as he,_ as se,q as b,F as K,x as be,y as z,z as je,A as Le,B as H,C as we,D as Te,E as oe,G as te,H as F,T as Be}from"./index-TjEVWkEy.js";function le(e){return Fe()?(Re(e),!0):!1}function Oe(e){let t=!1,n;const s=Ee(!0);return(...r)=>(t||(n=s.run(()=>e(...r)),t=!0),n)}function X(e){return typeof e=="function"?e():f(e)}const ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ne=Object.prototype.toString,De=e=>Ne.call(e)==="[object Object]",ke=()=>{};function Ve(e,t){function n(...s){return new Promise((r,l)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(r).catch(l)})}return n}const Ce=e=>e();function We(e=Ce){const t=x(!0);function n(){t.value=!1}function s(){t.value=!0}const r=(...l)=>{t.value&&e(...l)};return{isActive:_e(t),pause:n,resume:s,eventFilter:r}}function qe(e){return e||ve()}function Ue(...e){if(e.length!==1)return Ge(...e);const t=e[0];return typeof t=="function"?_e(ze(()=>({get:t,set:ke}))):x(t)}function He(e,t,n={}){const{eventFilter:s=Ce,...r}=n;return T(e,Ve(s,t),r)}function Pe(e,t,n={}){const{eventFilter:s,...r}=n,{eventFilter:l,pause:i,resume:d,isActive:c}=We(s);return{stop:He(e,t,{...r,eventFilter:l}),pause:i,resume:d,isActive:c}}function xe(e,t=!0,n){const s=qe(n);s?pe(e,s):t?e():me(e)}function P(e){var t;const n=X(e);return(t=n==null?void 0:n.$el)!=null?t:n}const D=ye?window:void 0,Je=ye?window.document:void 0;function J(...e){let t,n,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,r]=e,t=D):[t,n,s,r]=e,!t)return ke;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const l=[],i=()=>{l.forEach(w=>w()),l.length=0},d=(w,a,h,y)=>(w.addEventListener(a,h,y),()=>w.removeEventListener(a,h,y)),c=T(()=>[P(t),X(r)],([w,a])=>{if(i(),!w)return;const h=De(a)?{...a}:a;l.push(...n.flatMap(y=>s.map(_=>d(w,y,_,h))))},{immediate:!0,flush:"post"}),g=()=>{c(),i()};return le(g),g}function Qe(){const e=x(!1);return ve()&&pe(()=>{e.value=!0}),e}function Se(e){const t=Qe();return E(()=>(t.value,!!e()))}function Ze(e,t={}){const{window:n=D}=t,s=Se(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const l=x(!1),i=g=>{l.value=g.matches},d=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",i):r.removeListener(i))},c=Me(()=>{s.value&&(d(),r=n.matchMedia(X(e)),"addEventListener"in r?r.addEventListener("change",i):r.addListener(i),l.value=r.matches)});return le(()=>{c(),d(),r=void 0}),l}const q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U="__vueuse_ssr_handlers__",Ke=Xe();function Xe(){return U in q||(q[U]=q[U]||{}),q[U]}function Ie(e,t){return Ke[e]||t}function Ye(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const et={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ae="vueuse-storage";function $e(e,t,n,s={}){var r;const{flush:l="pre",deep:i=!0,listenToStorageChanges:d=!0,writeDefaults:c=!0,mergeDefaults:g=!1,shallow:w,window:a=D,eventFilter:h,onError:y=p=>{console.error(p)},initOnMounted:_}=s,k=(w?Ae:x)(typeof t=="function"?t():t);if(!n)try{n=Ie("getDefaultStorage",()=>{var p;return(p=D)==null?void 0:p.localStorage})()}catch(p){y(p)}if(!n)return k;const I=X(t),u=Ye(I),G=(r=s.serializer)!=null?r:et[u],{pause:V,resume:$}=Pe(k,()=>M(k.value),{flush:l,deep:i,eventFilter:h});return a&&d&&xe(()=>{J(a,"storage",R),J(a,ae,O),_&&R()}),_||R(),k;function M(p){try{if(p==null)n.removeItem(e);else{const C=G.write(p),j=n.getItem(e);j!==C&&(n.setItem(e,C),a&&a.dispatchEvent(new CustomEvent(ae,{detail:{key:e,oldValue:j,newValue:C,storageArea:n}})))}}catch(C){y(C)}}function W(p){const C=p?p.newValue:n.getItem(e);if(C==null)return c&&I!=null&&n.setItem(e,G.write(I)),I;if(!p&&g){const j=G.read(C);return typeof g=="function"?g(j,I):u==="object"&&!Array.isArray(j)?{...I,...j}:j}else return typeof C!="string"?C:G.read(C)}function O(p){R(p.detail)}function R(p){if(!(p&&p.storageArea!==n)){if(p&&p.key==null){k.value=I;return}if(!(p&&p.key!==e)){V();try{(p==null?void 0:p.newValue)!==G.write(k.value)&&(k.value=W(p))}catch(C){y(C)}finally{p?me($):$()}}}}}function tt(e){return Ze("(prefers-color-scheme: dark)",e)}function nt(e={}){const{selector:t="html",attribute:n="class",initialValue:s="auto",window:r=D,storage:l,storageKey:i="vueuse-color-scheme",listenToStorageChanges:d=!0,storageRef:c,emitAuto:g,disableTransition:w=!0}=e,a={auto:"",light:"light",dark:"dark",...e.modes||{}},h=tt({window:r}),y=E(()=>h.value?"dark":"light"),_=c||(i==null?Ue(s):$e(i,s,l,{window:r,listenToStorageChanges:d})),k=E(()=>_.value==="auto"?y.value:_.value),I=Ie("updateHTMLAttrs",($,M,W)=>{const O=typeof $=="string"?r==null?void 0:r.document.querySelector($):P($);if(!O)return;let R;if(w){R=r.document.createElement("style");const p="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";R.appendChild(document.createTextNode(p)),r.document.head.appendChild(R)}if(M==="class"){const p=W.split(/\s/g);Object.values(a).flatMap(C=>(C||"").split(/\s/g)).filter(Boolean).forEach(C=>{p.includes(C)?O.classList.add(C):O.classList.remove(C)})}else O.setAttribute(M,W);w&&(r.getComputedStyle(R).opacity,document.head.removeChild(R))});function u($){var M;I(t,n,(M=a[$])!=null?M:$)}function G($){e.onChanged?e.onChanged($,u):u($)}T(k,G,{flush:"post",immediate:!0}),xe(()=>G(k.value));const V=E({get(){return g?_.value:k.value},set($){_.value=$}});try{return Object.assign(V,{store:_,system:y,state:k})}catch{return V}}const ie=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function rt(e,t={}){const{document:n=Je,autoExit:s=!1}=t,r=E(()=>{var u;return(u=P(e))!=null?u:n==null?void 0:n.querySelector("html")}),l=x(!1),i=E(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(u=>n&&u in n||r.value&&u in r.value)),d=E(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(u=>n&&u in n||r.value&&u in r.value)),c=E(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(u=>n&&u in n||r.value&&u in r.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(u=>n&&u in n),w=Se(()=>r.value&&n&&i.value!==void 0&&d.value!==void 0&&c.value!==void 0),a=()=>g?(n==null?void 0:n[g])===r.value:!1,h=()=>{if(c.value){if(n&&n[c.value]!=null)return n[c.value];{const u=r.value;if((u==null?void 0:u[c.value])!=null)return!!u[c.value]}}return!1};async function y(){if(!(!w.value||!l.value)){if(d.value)if((n==null?void 0:n[d.value])!=null)await n[d.value]();else{const u=r.value;(u==null?void 0:u[d.value])!=null&&await u[d.value]()}l.value=!1}}async function _(){if(!w.value||l.value)return;h()&&await y();const u=r.value;i.value&&(u==null?void 0:u[i.value])!=null&&(await u[i.value](),l.value=!0)}async function k(){await(l.value?y():_())}const I=()=>{const u=h();(!u||u&&a())&&(l.value=u)};return J(n,ie,I,!1),J(()=>P(r),ie,I,!1),s&&le(y),{isSupported:w,isFullscreen:l,enter:_,exit:y,toggle:k}}const B=Oe(()=>$e("global-state",{playerRole:null,isAiBattle:!0,rounds:0,gameState:"init",playerCardItems:[],computerCardItems:[],bgImage:1,isShowGameInfo:!0})),st=S({__name:"ChangeGameStatus",setup(e){const t=B(),n=()=>{t.value.gameState="pause"};return(s,r)=>(m(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[o("div",{class:A({"i-material-symbols:play-circle-rounded":f(t).gameState==="pause","i-material-symbols:pause-circle":f(t).gameState==="start"}),"text-2xl":""},null,2)]))}}),ot=S({__name:"GameInfoToggle",setup(e){const t=B(),n=()=>{t.value.isShowGameInfo=!t.value.isShowGameInfo};return(s,r)=>ge((m(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},[o("div",{class:A({"i-material-symbols:right-panel-close-rounded":f(t).isShowGameInfo,"i-material-symbols:right-panel-open-rounded":!f(t).isShowGameInfo}),"text-2xl":""},null,2)],512)),[[he,f(t).gameState==="start"]])}}),lt=o("div",{"i-humbleicons:exchange-vertical":"","text-2xl":""},null,-1),at=[lt],it=S({__name:"ChangeBackImage",setup(e){const t=B(),n=()=>{t.value.bgImage>=4?t.value.bgImage=1:t.value.bgImage++};return(s,r)=>(m(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},at))}}),ut=S({__name:"FullScreenToggle",setup(e){const{isFullscreen:t,toggle:n}=rt();return(s,r)=>(m(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:r[0]||(r[0]=(...l)=>f(n)&&f(n)(...l))},[o("div",{class:A({"i-gridicons:fullscreen-exit":f(t),"i-gridicons:fullscreen":!f(t)}),"text-2xl":""},null,2)]))}}),ct=o("div",{"i-ph-sun-dim-duotone":"","dark:i-ph-moon-stars-duotone":"","text-2xl":""},null,-1),dt=[ct],ft=S({__name:"ColorSchemeToggle",setup(e){const t=nt(),n=()=>{t.value=t.value==="light"?"dark":"light"};return(s,r)=>(m(),v("button",{rounded:"","p-2":"",hover:"bg-active",onClick:n},dt))}}),pt={},mt={rounded:"",p2:"",title:"GitHub",hover:"bg-active",href:"https://github.com/SmallTeddy/e-card",target:"_blank"},_t=o("div",{"i-carbon-logo-github":"","text-2xl":""},null,-1),vt=[_t];function gt(e,t){return m(),v("a",mt,vt)}const ht=se(pt,[["render",gt]]),bt={"w-screen":"",px4:"",py3:"","text-lg":"",border:"b base",flex:"~ gap-1 items-center"},wt=o("div",{title:"Game"},"E-Card",-1),yt=o("div",{"flex-auto":""},null,-1),kt={__name:"GameNav",setup(e){return(t,n)=>(m(),v("nav",bt,[wt,yt,b(st),b(ht),b(ot),b(ft),b(it),b(ut)]))}},Y=e=>(je("data-v-312e5a55"),e=e(),Le(),e),Ct=Y(()=>o("tr",null,[o("td",null,"局数"),o("td",null,"角色"),o("td",null,"结果"),o("td",null,"记分")],-1)),xt=Y(()=>o("td",null,"总比分",-1)),St=Y(()=>o("td",null,null,-1)),It=Y(()=>o("td",null,null,-1)),$t=S({__name:"GameInformation",props:{gameInfoItems:{default:()=>[]}},setup(e){const n=e.gameInfoItems,s=E(()=>n.reduce((r,l)=>r+l.score,0));return(r,l)=>(m(),v("table",null,[Ct,(m(!0),v(K,null,be(f(n),i=>(m(),v("tr",{class:A(i.score?"bg-green":"bg-red")},[o("td",null,z(i.round),1),o("td",null,z(i.role),1),o("td",null,z(i.result),1),o("td",null,z(i.score),1)],2))),256)),o("tr",null,[xt,St,It,o("td",null,z(f(s)),1)])]))}}),Et=se($t,[["__scopeId","data-v-312e5a55"]]),Ft=""+new URL("bg-1-mdVtkdQm.jpg",import.meta.url).href,Rt=""+new URL("bg-2-DRO9E5Ab.jpg",import.meta.url).href,Gt=""+new URL("bg-3-9k6GZAb9.jpg",import.meta.url).href,zt=""+new URL("bg-4-AjVdAbEv.jpg",import.meta.url).href,At=""+new URL("card-bg-V5GSdMqO.jpg",import.meta.url).href,Mt=""+new URL("citizen-2myAtGQo.jpg",import.meta.url).href,jt=""+new URL("emperor-jZ-GUtEA.jpg",import.meta.url).href,Lt=""+new URL("slave-vZ3wDTL4.jpg",import.meta.url).href,L=B(),Tt=e=>e=="emperor"?"国王":"奴隶",ue=(e,t,n)=>({role:e,img:`${e}.jpg`,isClick:!1,isBack:!1,sort:t,group:n}),Q=(e,t=!0)=>{const n=Array(5).fill(0).map((r,l)=>ue("citizen",l+1,e)),s=ee(5);return n[s]=ue(e,s+1,e),n.map(r=>r.isBack=!t),n},ne=e=>e=="emperor"?"slave":"emperor",ce=(e,t)=>{L.value={playerRole:e,rounds:t,gameState:"init",isAiBattle:!0,playerCardItems:Q(e,!0),computerCardItems:Q(ne(e),!1),bgImage:1,isShowGameInfo:!0}},Bt=()=>{const e=ne(L.value.playerRole),t=L.value.rounds+1;L.value.playerRole=e,L.value.rounds=t,L.value.playerCardItems=Q(e,!0),L.value.computerCardItems=Q(ne(e),!1)},Z=e=>new URL(Object.assign({"../assets/bg-1.jpg":Ft,"../assets/bg-2.jpg":Rt,"../assets/bg-3.jpg":Gt,"../assets/bg-4.jpg":zt,"../assets/card-bg.jpg":At,"../assets/citizen.jpg":Mt,"../assets/emperor.jpg":jt,"../assets/slave.jpg":Lt})[`../assets/${e}`],import.meta.url).href,ee=e=>(Math.floor(Math.random()*e)+1)%e,re=(e,t=new WeakMap)=>{if(e===null||typeof e!="object")return e;if(t.has(e))return t.get(e);const n=Array.isArray(e)?[]:{};t.set(e,n);for(let s in e)e.hasOwnProperty(s)&&(n[s]=re(e[s],t));return n},Ot=S({__name:"Card",props:{cardInfo:{default:()=>null},isAnimation:{type:Boolean,default:()=>!1},isBack:{type:Boolean,default:()=>!1}},emits:["card-click"],setup(e,{emit:t}){const n=t;return(s,r)=>(m(),v("div",{class:A({"card-animation":s.isAnimation,"card-back":s.isBack}),"card-size":"",relative:"","preserve-3d":"","cursor-pointer":"","transition-transform-1":"",onClick:r[0]||(r[0]=l=>n("card-click",s.cardInfo))},[o("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"",style:H({backgroundImage:`url(${f(Z)(s.cardInfo.img)})`})},null,4),o("div",{"w-full":"","h-full":"",absolute:"","bg-cover":"","backface-hidden":"","transform-rotate-y-180":"",style:H({backgroundImage:`url(${f(Z)("card-bg.jpg")})`})},null,4)],2))}}),N=se(Ot,[["__scopeId","data-v-cfbea0d8"]]),Nt={grid:"~ cols-5 gap-5"},Dt=S({__name:"ComputedCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const s=e,r=n,l=x();return T(()=>s.cardItems,d=>{l.value=d},{immediate:!0}),t({cardCheckClick:d=>{l.value=l.value.filter(c=>c.sort!==d.sort),r("card-check",d)}}),(d,c)=>(m(),v("div",Nt,[(m(!0),v(K,null,be(d.cardItems,(g,w)=>(m(),v("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([g.isClick?"top--20px":"top-0",g.group,g.role+w])},[b(N,{"card-info":g,"is-back":""},null,8,["card-info"])],2))),256))]))}}),Vt={key:0,"text-center":""},Wt=["onClick"],qt=S({__name:"PlayerCard",props:{role:{default:()=>"emperor"},cardItems:{default:()=>[]}},emits:{"card-check":e=>!0},setup(e,{expose:t,emit:n}){const s=e,r=n,l=x();T(()=>s.cardItems,c=>{l.value=c},{immediate:!0});const i=c=>{l.value.map(g=>g.isClick=!1),c.isClick=!0},d=c=>{c.isBack=!0,setTimeout(()=>{r("card-check",c)},1e3)};return t({cardCheckClick:d}),(c,g)=>{const w=we("draggable");return m(),Te(w,{list:c.cardItems,tag:"div",group:{name:c.role,pull:!0,put:!1,revertClone:!0},"component-data":{grid:"~ cols-5 gap-5"},"item-key":"sort",sort:!0},{item:oe(({element:a,index:h})=>[o("div",{"card-size":"",relative:"","cursor-pointer":"","transition-all-500":"",class:A([a.isClick?"top--20px":"top-0",a.group,a.role+h])},[b(N,{cardInfo:a,"is-back":a.isBack,onCardClick:i},null,8,["cardInfo","is-back"]),a.isClick?(m(),v("div",Vt,[o("button",{onClick:y=>d(a)},"check",8,Wt)])):te("",!0)],2)]),_:1},8,["list","group"])}}}),Ut={flex:"~ col items-center gap-10"},Ht=o("h3",null,"游戏说明",-1),Pt=o("div",{"text-5xl":"",flex:"~ col gap-5"},[o("p",null,"游戏共分为两种角色，皇帝和奴隶，每个角色拥有5张牌"),o("p",null,"皇帝方：持1张皇帝牌（Emperor），4张市民牌（Citizen）"),o("p",null,"奴隶方：持1张奴隶牌（Slave），4张市民牌（Citizen）"),o("p",null,"游戏开始时随机分配角色，之后每一局角色轮换，共进行21局"),o("p",null,"玩家选择一张牌后，点击check出牌，进行比较"),o("p",null,"皇帝赢市民，市民赢奴隶，奴隶赢皇帝"),o("p",null,"市民对市民互相抵消，各自弃牌进入下一轮，抵消牌不再交还各方"),o("p",null,"皇帝或奴隶被杀，游戏宣告结束，被杀方告负，"),o("p",null,"赢则积1分，数则积0分，先赢到11分则游戏结束")],-1),Jt=S({__name:"GameExplain",emits:["close"],setup(e,{emit:t}){const n=t;return(s,r)=>(m(),v("div",Ut,[Ht,Pt,o("button",{onClick:r[0]||(r[0]=l=>n("close"))},"返回")]))}}),Qt={key:0,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},Zt={key:0,flex:"~ col items-center gap-10"},Kt={"w-160px":"","h-56px":"","flex-center":"","rd-8px":"","gap-5":""},Xt={"text-green":""},Yt={"w-240px":"","h-56px":"","flex-center":"","rd-8px":""},en={"text-red":""},tn={key:1,"flex-col":"","flex-center":"","gap-5":""},nn={"flex-center":"","gap-10":""},rn={key:1,"flex-center":"","flex-col":"","h-full":"","w-screen":"",relative:"","font-size-40px":"","bg-gray:50":""},de=21,sn=S({__name:"GameMenu",setup(e,{expose:t}){const n=B(),s=x(!1),r=x(!0),l=x({playerRole:ee(2)==0?"emperor":"slave",rounds:1}),i=E(()=>Tt(l.value.playerRole));ce(Math.floor(Math.random()*10*20%2)==0?"emperor":"slave",1),l.value=n.value;const d=()=>{r.value=!0,l.value.rounds<=de&&l.value.rounds>1&&setTimeout(()=>{r.value=!1},2e3)},c=()=>{s.value=!0,n.value.gameState="start",setTimeout(()=>{r.value=!1,l.value.rounds>de&&(s.value=!1)},2e3)},g=()=>{s.value=!1,r.value=!0,n.value.rounds=1,n.value.gameState="init",ce(l.value.playerRole,l.value.rounds),l.value=n.value},w=()=>{let _="开始";return n.value.gameState==="pause"&&(_="继续"),_},a=x(!1),h=()=>{r.value=!1,a.value=!0},y=()=>{r.value=!0,a.value=!1};return T(()=>n.value.gameState,_=>{s.value=_==="start",_==="start"&&c(),_==="pause"&&(r.value=!0)},{immediate:!0}),t({reshow:d}),(_,k)=>{var I;return m(),v(K,null,[f(r)?(m(),v("div",Qt,[f(s)?(m(),v("div",Zt,[o("div",Kt,[F(" 第 "),o("span",Xt,z((I=f(l))==null?void 0:I.rounds),1),F(" 局 ")]),o("div",Yt,[F(" 角色 ： "),o("span",en,z(f(i)),1)])])):(m(),v("div",tn,[o("button",{onClick:c},z(w()),1),o("button",{onClick:g},"重新开始"),o("button",{onClick:h},"游戏说明"),o("div",nn,[b(N,{"card-info":{role:"emperor",img:"emperor.jpg"},"is-animation":""},null,8,["card-info"]),b(N,{"card-info":{role:"citizen",img:"citizen.jpg"},"is-animation":""},null,8,["card-info"]),b(N,{"card-info":{role:"slave",img:"slave.jpg"},"is-animation":""},null,8,["card-info"])])]))])):te("",!0),f(a)?(m(),v("div",rn,[b(Jt,{onClose:y})])):te("",!0)],64)}}}),on={key:0},ln={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},an=o("br",null,null,-1),un=o("br",null,null,-1),cn=o("br",null,null,-1),fe=S({__name:"CheckCard",props:{cardInfo:{default:()=>null}},setup(e){return(t,n)=>t.cardInfo[0]?(m(),v("div",on,[b(N,{"card-info":t.cardInfo[0],"is-back":t.cardInfo[0].isBack},null,8,["card-info","is-back"])])):(m(),v("div",ln,[F(" 检"),an,F("查"),un,F("区"),cn,F("域 ")]))}}),dn={key:0,"flex-center":"",relative:"","card-size":""},fn=["alt","src"],pn={key:1,"card-size":"","cursor-pointer":"",border:"1px #fff dashed","flex-center":""},mn=o("br",null,null,-1),_n=o("br",null,null,-1),vn=o("br",null,null,-1),gn=S({__name:"DropCard",props:{cardItems:{default:()=>[]}},setup(e){return(t,n)=>{const s=we("draggable");return t.cardItems.length>0?(m(),v("div",dn,[b(s,{list:t.cardItems,group:"drop","item-key":"sort"},{item:oe(({element:r,index:l})=>[o("img",{"card-size":"","cursor-pointer":"",absolute:"","left-0":"","top-0":"",class:"rotate",style:H(`--rotation-random: ${f(ee)(5*l)}deg`),alt:r.role,src:f(Z)(r.img)},null,12,fn)]),_:1},8,["list"])])):(m(),v("div",pn,[F(" 弃"),mn,F("牌"),_n,F("区"),vn,F("域 ")]))}}}),hn={grid:"~ rows-4","col-span-3":"","h-full":"","w-full":""},bn={"w-full":"","bg-gray:50":"","flex-center":""},wn={"bg-gray:50":"","flex-center":""},yn={"w-full":"","bg-gray:50":"","flex-center":""},kn={"w-full":"","bg-gray:50":"","flex-center":""},Cn={grid:"~ rows-4","col-span-2":"","h-full":"","w-full":""},xn={"h-full":"","w-full":"","bg-gray:80":"","flex-center":"","row-span-3":""},Sn={"w-full":"","bg-gray:80":"","flex-center":"","row-span-1":""},In=S({__name:"GameMain",setup(e){const t=B(),n=x(null),s=E(()=>t.value.playerRole),r=x(),l=x(),i=x([]),d=x([]),c=a=>{r.value&&i.value.push(r.value,l.value);const h=re(a);r.value=h,t.value.playerCardItems=t.value.playerCardItems.filter(k=>k.sort!==h.sort);const y=ee(t.value.computerCardItems.length),_=re(t.value.computerCardItems[y]);l.value=_,t.value.computerCardItems=t.value.computerCardItems.filter(k=>k.sort!==_.sort),setTimeout(()=>{w(h,_)},1e3)},g=(a,h)=>{const _={emperor:{emperor:null,citizen:"win",slave:"lose"},citizen:{emperor:"lose",citizen:null,slave:"win"},slave:{emperor:"win",citizen:"lose",slave:null}}[a.role][h.role];return{round:t.value.rounds,role:s.value,result:_,score:_==="win"?1:0}},w=(a,h)=>{setTimeout(()=>{l.value.isBack=!1,r.value.isBack=!1},1e3),setTimeout(()=>{if(l.value=null,r.value=null,a.role===h.role)i.value.push(a,h);else{const y=g(a,h);d.value.push(y),i.value=[],Bt(),n.value.reshow()}},2e3)};return T(()=>t.value.gameState,a=>{a==="init"&&(i.value=[],d.value=[])}),(a,h)=>(m(),v(K,null,[b(sn,{ref_key:"showGameMenuRef",ref:n},null,512),b(Be,null,{default:oe(()=>[o("div",{"h-full":"","w-screen":"",grid:"~",class:A([f(t).isShowGameInfo?"grid-cols-5":"grid-cols-1"])},[o("div",hn,[o("div",bn,[b(Dt,{role:"slave",cardItems:f(t).computerCardItems},null,8,["cardItems"])]),o("div",wn,[b(fe,{"card-info":[f(l)]},null,8,["card-info"])]),o("div",yn,[b(fe,{"card-info":[f(r)]},null,8,["card-info"])]),o("div",kn,[b(qt,{role:"emperor",cardItems:f(t).playerCardItems,onCardCheck:c},null,8,["cardItems"])])]),ge(o("div",Cn,[o("div",xn,[b(Et,{"game-info-items":f(d)},null,8,["game-info-items"])]),o("div",Sn,[b(gn,{cardItems:f(i)},null,8,["cardItems"])])],512),[[he,f(t).isShowGameInfo]])],2)]),_:1})],64))}}),$n=S({__name:"GameContent",setup(e){const t=B();return(n,s)=>(m(),v("div",{"w-full":"","h-full":"","flex-center":"","bg-center":"","bg-cover":"","bg-no-repeat":"",style:H({backgroundImage:`url(${f(Z)(`bg-${f(t).bgImage}.jpg`)})`})},[b(In)],4))}}),En={"h-100dvh":"","h-screen":"","w-screen":"","of-hidden":"",grid:"~ rows-[max-content_1fr]"},Rn=S({__name:"Home",setup(e){return(t,n)=>(m(),v("main",En,[b(kt),b($n)]))}});export{Rn as default};
